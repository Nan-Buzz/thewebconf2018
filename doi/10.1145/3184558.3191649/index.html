<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for HTML5 for Linux version 5.7.16" />
  <title>Spatio-Temporal Analysis for Smart City Data⁎⁎Produces the
  permission block, and copyright information</title>
  <!-- Copyright (c) 2010-2015 The MathJax Consortium -->
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8" />
  <meta name="viewport" content=
  "width=device-width; initial-scale=1.0;" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="screen, print" rel="stylesheet" href=
  "../../../data/dl.acm.org/pubs/lib/css/bootstrap.min.css" />
  <link media="screen, print" rel="stylesheet" href=
  "../../../data/dl.acm.org/pubs/lib/css/bootstrap-theme.min.css" />
  <link media="screen, print" rel="stylesheet" href=
  "../../../data/dl.acm.org/pubs/lib/css/main.css" />
  <script src="../../../data/dl.acm.org/pubs/lib/js/jquery.min.js" type=
  "text/javascript"></script>
  <script src="../../../data/dl.acm.org/pubs/lib/js/bootstrap.min.js"
  type="text/javascript"></script>
  <script src="../../../data/dl.acm.org/pubs/lib/js/bibCit.js" type=
  "text/javascript"></script>
  <script src="../../../data/dl.acm.org/pubs/lib/js/divTab.js" type=
  "text/javascript"></script>
  <script type="text/javascript" src=
  "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML"></script>
  <script type="text/x-mathjax-config">
  <![CDATA[
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  ]]>
  </script>
</head>
<body id="main">
  <section class="front-matter">
    <section>
      <header class="title-info">
        <div class="journal-title">
          <h1><span class="title">Spatio-Temporal Analysis for
          Smart City Data<a class="fn" href="#fn1" id=
          "foot-fn1"><sup>⁎</sup></a></span><br />
          <span class="subTitle"></span></h1>
        </div>
      </header>
      <div class="authorGroup">
        <div class="author">
          <span class="givenName">Maria</span> <span class=
          "surName">Bermudez-Edo</span> University of Granada,
          <a href="mailto:mbe@ugr.es">mbe@ugr.es</a>
        </div>
        <div class="author">
          <span class="givenName">Payam</span> <span class=
          "surName">Barnaghi</span> University of Surrey, <a href=
          "mailto:p.barnaghi@surrey.ac.uk">p.barnaghi@surrey.ac.uk</a>
        </div>
      </div><br />
      <div class="pubInfo">
        <p>DOI: <a href="https://doi.org/10.1145/3184558.3191649"
        target=
        "_blank">https://doi.org/10.1145/3184558.3191649</a><br />
        WWW '18: <a href="https://doi.org/10.1145/3184558" target=
        "_blank">Proceedings of The Web Conference 2018</a>, Lyon,
        France, April 2018</p>
      </div>
      <div class="abstract">
        <p><small>The data gathered from smart cities can help
        citizens and city manager planners know where and when they
        should be aware of the repercussions regarding events
        happening in different parts of the city. Most of the smart
        city data analysis solutions are focused on the events and
        occurrences of the city as a whole, making it difficult to
        discern the exact place and time of the consequences of a
        particular event. We propose a novel method to model the
        events in a city in space and time. We apply our
        methodology for vehicular traffic data basing our models in
        (convolutional) neuronal networks.</small></p>
      </div>
      <div class="CCSconcepts">
        <p><small><span style="font-weight:bold;">CCS
        Concepts:</span> • <strong>Information systems</strong> →
        <strong>Data streaming;</strong> • <strong>Computing
        methodologies</strong> → <strong>Neural
        networks;</strong></small></p>
      </div>
      <div class="classifications">
        <div class="author">
          <span style=
          "font-weight:bold;"><small>Keywords:</small></span>
          <span class="keyword"><small>Spatio-Temporal analysis;
          Deep Learning; Smart cities; Internet of Things; Neuronal
          Networks</small></span>
        </div><br />
        <div class="AcmReferenceFormat">
          <p><small><span style="font-weight:bold;">ACM Reference
          Format:</span><br />
          Maria Bermudez-Edo and Payam Barnaghi. 2018.
          Spatio-Temporal Analysis for Smart City Data. In <em>WWW
          '18 Companion: The 2018 Web Conference Companion,</em>
          <em>April 23–27, 2018 (WWW ’18 Companion),</em> <em>Lyon,
          France. ACM, New York, NY, USA</em> 5 Pages. <a href=
          "https://doi.org/10.1145/3184558.3191649" class=
          "link-inline force-break" target=
          "_blank">https://doi.org/10.1145/3184558.3191649</a></small></p>
        </div>
      </div>
    </section>
  </section>
  <section class="body">
    <section id="sec-3">
      <header>
        <div class="title-info">
          <h2><span class="section-number">1</span>
          Introduction</h2>
        </div>
      </header>
      <p>Smart Cities allow city managers to be proactive in
      planning, managing and responding to different occurrences,
      changes and events in the urban environments. However, this
      requires spatio-temporal and thematic information of events
      and changes that occur around the city. For example, in case
      of a traffic accident or road works, city managers should
      know how this accident or work will affect the rest of the
      roads in the near future and derive the traffic accordingly
      through accurate alternative routes. Most of the research
      done in smart cities aim at creating snapshots of the events
      and changes in the city at each moment of time, and/or
      predicting future status of the city based on the historical
      data [<a class="bib" data-trigger="hover" data-toggle=
      "popover" data-placement="top" href="#BibPLXBIB0011">11</a>].
      For example, existing predictions of traffic in roads are
      based on the traffic at each road and/or adjacent ones based
      on the historical data.</p>
      <p>However, the events in one point of the city could affect
      the status of another point of the city in an elapsed period
      of time. For example, an accident in one area could affect
      the traffic in other parts of the city in the next five
      minutes, and another different part of the city in the next
      hour and so on.</p>
      <p>The key contribution of this paper is to identify the
      spatio-temporal correlations in smart cities data streams and
      to include the correlation metrics in a suitable analysis of
      real world data streams. This analysis provides a view of the
      changes inside the city networks; how different data related
      to people, traffic, electricity, etc. change around the city
      roads or water and electricity networks. With a suitable view
      of these changes, city councils, planners, developers,
      industry and citizens can better manage and use their time
      and resources, make better planning of facilities, and manage
      the events in the city.</p>
      <p>Conventional approaches to smart city data analysis often
      overlook the temporal component interlinked with the spatial
      components of the data [<a class="bib" data-trigger="hover"
      data-toggle="popover" data-placement="top" href=
      "#BibPLXBIB0010">10</a>] [<a class="bib" data-trigger="hover"
      data-toggle="popover" data-placement="top" href=
      "#BibPLXBIB0002">2</a>]. The spatial analysis will not be
      sufficient to model the data changes and their correlation in
      a city. We show a more generalised model by adding a temporal
      component to the spatial data analysis. We propose to analyse
      the city data not as snapshots of the whole city, but in a
      manner that we can shift the data in time, to better
      interpret the elapsed time and temporal correlations between
      an event in one point of the city and the consequence of this
      event in another part of the city.</p>
      <p>The proposed approach can be used to model spatio-temporal
      networks in different environments. We evaluate our solution
      according to a spatio-temporal traffic data analysis scenario
      with data coming from traffic sensors by means of the
      Internet of Things (IoT) technologies. To construct the model
      we use (convolutional) neuronal networks (C)(NN) based
      solutions. Neuronal networks have been traditionally used for
      computer vision, speech recognition or natural language
      processing among many other applications. Vehicular traffic
      data has also been analysed by methods such as series
      analysis, and solutions such as kalman filters. As the nature
      of traffic flows is complicated, some works are starting to
      use deep learning algorithms which can help in representing
      traffic features without prior knowledge [<a class="bib"
      data-trigger="hover" data-toggle="popover" data-placement=
      "top" href="#BibPLXBIB0006">6</a>]. These recent works have
      obtained promising results [<a class="bib" data-trigger=
      "hover" data-toggle="popover" data-placement="top" href=
      "#BibPLXBIB0004">4</a>, <a class="bib" data-trigger="hover"
      data-toggle="popover" data-placement="top" href=
      "#BibPLXBIB0006">6</a>]. In this paper we apply (C)NN models
      to construct a spatio-temporal data analytic model for smart
      city data.</p>
      <p>The rest of the paper is organised as follows. Section
      <a class="sec" href="#sec-4">2</a> describes previous works.
      Section <a class="sec" href="#sec-5">3</a> introduces the
      methodology used. Section <a class="sec" href="#sec-6">4</a>
      shows a preliminary experimentations to evaluate the proposal
      with vehicular data of a city. Section <a class="sec" href=
      "#sec-7">5</a> acknowledges the promising results but
      limitations of the current experiments and addresses the
      challenges for future works. Finally, section <a class="sec"
      href="#sec-8">6</a> concludes the paper.</p>
    </section>
    <section id="sec-4">
      <header>
        <div class="title-info">
          <h2><span class="section-number">2</span> State of the
          Art</h2>
        </div>
      </header>
      <p>Although neural networks were traditionally used in
      computer vision, speech recognition or natural language
      processing, in recent years it has been successfully used in
      other fields, such as text analysis. For example in
      [<a class="bib" data-trigger="hover" data-toggle="popover"
      data-placement="top" href="#BibPLXBIB0007">7</a>] Severyn et
      al. used CNN for twitter sentiment analysis. They use a
      single convolutional layer followed by max pooling,
      non-linearity and soft-max classification layers. Moraes et
      al. have performed a comparison between support vector
      machine (SVN) and artificial neural networks (ANN)
      classifiers for sentiment analysis and conclude that ANN
      performs better except for cases with unbalanced data
      [<a class="bib" data-trigger="hover" data-toggle="popover"
      data-placement="top" href="#BibPLXBIB0008">8</a>].</p>
      <p>In the field of vehicular traffic analysis some works are
      starting to use neural networks, specially for short term
      traffic prediction. Traffic flows contains sharp
      nonlinearities due to transitions between free flow,
      breakdown, recovery and congestion and deep learning
      architectures can capture these nonlinear spatio-temporal
      effects [<a class="bib" data-trigger="hover" data-toggle=
      "popover" data-placement="top" href="#BibPLXBIB0009">9</a>].
      In [<a class="bib" data-trigger="hover" data-toggle="popover"
      data-placement="top" href="#BibPLXBIB0009">9</a>] authors
      developed a deep learning model combining linear models and
      tanh layers to predict traffic flows in extreme traffic
      conditions such as snowstorm and crowdly football games. In
      [<a class="bib" data-trigger="hover" data-toggle="popover"
      data-placement="top" href="#BibPLXBIB0006">6</a>] authors use
      a deep learning approach based on the use of a stacker
      auto-encoder model to learn generic traffic flow features.
      Authors use this model to short term predicting traffic. In
      [<a class="bib" data-trigger="hover" data-toggle="popover"
      data-placement="top" href="#BibPLXBIB0005">5</a>] authors use
      genetic algorithms and cross entropy also for short term
      traffic prediction. However all these works show the traffic
      situation of either a point on the city or a snapshot of the
      city, but do not show the differences on time and space at
      the same time. Dia uses a time-lag recurrent network TLRN, in
      [<a class="bib" data-trigger="hover" data-toggle="popover"
      data-placement="top" href="#BibPLXBIB0001">1</a>], which
      predict the traffic in a section using a recurrent NN with
      time lags in order to achieve time-shift invariance. However
      these time lags are used internally in the neural network and
      the output is the prediction of the vehicular traffic at one
      point with historical data of that point.</p>
    </section>
    <section id="sec-5">
      <header>
        <div class="title-info">
          <h2><span class="section-number">3</span>
          Methodology</h2>
        </div>
      </header>
      <p>Most of the data changes in the cities occur and
      disseminate over a network of nodes; for example, water
      distribution runs over a network of pipes, social media data
      can be grouped among several hotspots, people or vehicles
      move over a network of streets and roads. These nodes and
      networks have an inherent spatial component, each node has
      neighbouring nodes, and nodes that are linked through other
      nodes. However, the data changes have also a temporal
      component and elements such as people, vehicles or water have
      different patterns that cannot be simply modelled by a
      network topology.</p>
      <p>We propose using spatio-temporal analysis to identify and
      represent correlating patterns that can enhance the
      management of future movements in the city. With our model,
      we address not only the spatial topology, but also the actual
      patterns and data changes in a city. With this approach we
      can know how the status of one part of the network can affect
      the status of other part in an elapsed period of time. For
      example, we can infer that a dense vehicle traffic in one
      point of the city will affect another point of the city
      several minutes later.</p>
      <p>When analysing vehicular traffic data, researchers use
      snapshots of the traffic in the city. Overall, the
      predictions are usually based on the previous traffic data
      and the values are taken in sequential order showing each
      time slot the traffic as a series of sequences and changes in
      them. Our proposed method decouples the serial sensors flows
      in time. We use (C)NN to training the model with different
      traffic data. However, prior to feeding the data to the NN
      model, we perform a time shift for each segment at the
      data)(i.e. by shifting the time slots). Consequently, the
      time decouple in each flow (<em>Δt</em>) is different.</p>
      <p>To clarify our approach we only use four streams (three
      inputs and one output) and we decouple only the first traffic
      flow <em>X</em> <sub>1</sub>, as shown in Figure <a class=
      "fig" href="#fig1">1</a>, which correspond to the traffic
      flow <em>X</em> <sub>1</sub> shown in Figure <a class="fig"
      href="#fig2">2</a>. Training the network with different
      values of (<em>Δt</em>) for the first traffic flow
      (<em>X</em> <sub>1</sub>) leads to different models with
      different performance. The model is trained with the inputs
      of streams <em>X</em> <sub>2</sub> and <em>X</em>
      <sub>3</sub> at <em>t</em> and stream <em>X</em> <sub>1</sub>
      at time <em>t</em> + <em>Δt</em>. We measure the performance
      (accuracy to predict <em>Y</em> <sub>0</sub>) of the
      different models with different <em>Δt</em>, in order to find
      the best model. The model with best performance (i.e. the one
      that better models the traffic giving the minimum error and
      therefore the best performance indexes values) will provide
      the time (<em>Δt</em>) that an event taking place in stream
      <em>X</em> <sub>1</sub> (or in sector <em>X</em> <sub>1</sub>
      of the city) will show a response in stream <em>Y</em>
      <sub>0</sub> (or in sector <em>Y</em> <sub>0</sub> of the
      city).</p>
      <figure id="fig1">
        <img src=
        "../../../data/deliveryimages.acm.org/10.1145/3200000/3191649/images/www18companion-388-fig1.jpg"
        class="img-responsive" alt="Figure 1" longdesc="" />
        <div class="figure-caption">
          <span class="figure-number">Figure 1:</span> <span class=
          "figure-title">Neuronal network showing the time shift
          performed to the first traffic flow</span>
        </div>
      </figure>
      <figure id="fig2">
        <img src=
        "../../../data/deliveryimages.acm.org/10.1145/3200000/3191649/images/www18companion-388-fig2.jpg"
        class="img-responsive" alt="Figure 2" longdesc="" />
        <div class="figure-caption">
          <span class="figure-number">Figure 2:</span> <span class=
          "figure-title">Map of the vehicular data used in the
          experiments. The red dots are the sensors. The arrows
          represent the traffic in the section between 2 sensors.
          <em>X</em> <sub>1</sub>, <em>X</em> <sub>2</sub> and
          <em>X</em> <sub>3</sub> are the inputs of the NN and
          <em>Y</em> <sub>0</sub> is the output. We shift
          <em>X</em> <sub>1</sub> in time to analyse the temporal
          relationship with <em>Y</em> <sub>0</sub></span>
        </div>
      </figure>
      <p></p>
    </section>
    <section id="sec-6">
      <header>
        <div class="title-info">
          <h2><span class="section-number">4</span> Use Case:
          Preliminary Implementation and Evaluation</h2>
        </div>
      </header>
      <p>The (C)NN model is controlled by using a dataset
      consisting on traffic data that has been measured every 5
      minutes among 135 sensors located in different points in the
      city of Aarhus. the dataset is available on the CityPulse
      project reference dataset website<a class="fn" href="#fn3"
      id="foot-fn3"><sup>1</sup></a>. The data is organised in
      pairs of sensors providing information regarding the
      geographical location of both sensors, time-stamp, and
      traffic intensity such as average speed and vehicle count
      between them. Figure <a class="fig" href="#fig2">2</a>, shows
      the location of the sensors represented in Google
      Maps<a class="fn" href="#fn4" id="foot-fn4"><sup>2</sup></a>
      as red dots.</p>
      <p>The original dataset consists on two and a half months
      vehicular traffic values, which consist exactly on 17.474
      samples on each sensor. However we need to synchronized the
      data in all sensors and discard faulty values. In consequence
      one faulty value demand the deletion of all the values at
      that time. After that cleaning of data and without applying
      any time shift yet, we end up with 14.150 samples of tuples
      of the four sensors values. See table <a class="tbl" href=
      "#tab1">1</a> for details. After each time-shift we need to
      realign the data of the four sensors and clean the data
      accordingly. Therefore for each time shift the sample values
      vary slightly. The cleaned data is then divided in a training
      and a test sets, in which approximately 70% of the data is
      used for training and 30% of the data is used for
      testing.</p>
      <div class="table-responsive" id="tab1">
        <div class="table-caption">
          <span class="table-number">Table 1:</span> <span class=
          "table-title">Data used in the experiments without any
          time shift</span>
        </div>
        <table class="table">
          <tbody>
            <tr>
              <td style="text-align:center;">original data</td>
              <td style="text-align:center;">original samples</td>
              <td style="text-align:center;">after cleaning
              samples</td>
              <td style="text-align:center;">training samples</td>
              <td>test samples</td>
            </tr>
            <tr>
              <td style="text-align:center;">2 months</td>
              <td style="text-align:center;">17.474</td>
              <td style="text-align:center;">14.150</td>
              <td style="text-align:center;">10.000</td>
              <td>4.150</td>
            </tr>
            <tr>
              <td style="text-align:center;"></td>
              <td style="text-align:center;"></td>
              <td style="text-align:center;">81 % original
              data</td>
              <td style="text-align:center;">70.77 % cleaned
              data</td>
              <td>29.33 % cleaned data</td>
            </tr>
          </tbody>
        </table>
      </div>
      <p>To construct the model, we use (Convolutional) Neural
      network architectures with different layers and parameters
      including a deep network consisting in three hidden layers
      with 300 hidden units each, a shallow network with only one
      hidden layer of three units and a CNN model with a
      convolutional layer and one hidden layer of 300 units. The
      activation function used is softmax as our problem is a
      multi-classification task. We realized that the optimization
      score function categorical-cross-entropy performs better for
      our dataset than the extendedly used square error
      regression.</p>
      <p>To evaluate the effectiveness of the proposal we use two
      performance indexes: the mean absolute error (MAE) and the
      mean squared error regression loss (MSE). They are defined
      as:</p>
      <div class="table-responsive" id="Xeq1">
        <div class="display-equation">
          <span class="tex mytex">\begin{equation} MAE =
          \frac{1}{n}\sum _{i=1}^{n}\left| y_{i}-\widehat{y_{i}}
          \right| \end{equation}</span><br />
          <span class="equation-number">(1)</span>
        </div>
      </div>
      <div class="table-responsive" id="Xeq2">
        <div class="display-equation">
          <span class="tex mytex">\begin{equation} MSE =
          \frac{1}{n}\sum _{i=1}^{n}(y_{i}-\widehat{y_{i}})^{2}
          \end{equation}</span><br />
          <span class="equation-number">(2)</span>
        </div>
      </div>
      <p></p>
      <p>where:</p>
      <ul class="list-no-style">
        <li id="list1" label="•"><em>Y</em> are the real
        values<br /></li>
        <li id="list2" label="•"><span class=
        "inline-equation"><span class="tex">$\hat{Y}$</span></span>
        are the expected values<br /></li>
      </ul>
      <p>where <em>y</em> is the observed traffic flow with each
      observed value <em>y<sub>i</sub></em> , and <span class=
      "inline-equation"><span class="tex">$
      \widehat{y}$</span></span> is the predicted traffic data with
      each predicted value <span class=
      "inline-equation"><span class=
      "tex">$\widehat{y_{i}}$</span></span> . The lower the values
      of MAE and MSE the better the accuracy, meaning that the
      predicted values are closer to the real occurrences and
      therefore the model is accurate, while higher values mean
      that the model perform less efficiently.</p>
      <p>The experiments use only the variable <em>vehicle
      count</em> of the sectors of the city. We use approximately
      one and a half month of data to train each model and two
      weeks of the traffic data to test the model. The experiments
      model the neuronal network with inputs as the variables
      <em>vehicle count</em> of four sectors (see Figure <a class=
      "fig" href="#fig2">2</a>).</p>
      <p>In this preliminary experiment we will be focus on how the
      traffic streams of <em>Y</em> <sub>0</sub> and <em>X</em>
      <sub>1</sub> are correlated in time. To this end we propose a
      baseline where the inputs to the (C)NN are variables
      <em>X</em> <sub>1</sub>, <em>X</em> <sub>2</sub> and
      <em>X</em> <sub>3</sub> and the output is <em>Y</em>
      <sub>0</sub>. We propose to shift in time only variable
      <em>X</em> <sub>1</sub>, and leave <em>X</em> <sub>2</sub>
      and <em>X</em> <sub>3</sub> as they are to simplify the
      preliminary experiment and focus only on the temporal
      correlation between <em>Y</em> <sub>0</sub> and <em>X</em>
      <sub>1</sub>. In this experiment the spatial component is
      inherent to the data, as the streams belong to different
      spatial areas of the city. We select the spatial streams by
      visual inspection of the map. The temporal component is
      tested by shifting only some of the streams.</p>
      <p>These models involved the decouple of the signal
      <em>X</em> <sub>1</sub> and the rest of the signals
      (<em>X</em> <sub>2</sub>, <em>X</em> <sub>3</sub> and
      <em>Y</em> <sub>0</sub>) with different elapsed periods.
      First we calculate the model with all the streams at
      <em>t</em>. After that, we shift stream <em>X</em>
      <sub>1</sub> 5 minutes and calculate again the model between
      <em>X</em> <sub>1</sub>(<em>t</em> + 5<em>minutes</em>),
      <em>X</em> <sub>2</sub>(<em>t</em>), <em>X</em>
      <sub>3</sub>(<em>t</em>) and <em>Y</em>
      <sub>0</sub>(<em>t</em>). The 5 minutes lag were chosen,
      because the streams consist of readings of data every 5
      minutes. We repeated the procedure for different time lags.
      We also performed the experiments for different node
      structures with deep and shallow NN and with CNN, obtaining
      similar results. In all the experiments we notice that the
      performance indexed improved until a threshold time shift
      around the 10 minutes elapsed time and the performance start
      degrading when the time shift become higher that 10
      minutes.</p>
      <p>Obviously the time shift threshold will depend on the data
      and the nature of the event and its impact on other sources.
      In this work we obtain this value by using heuristics from
      different time shifts experiments. However, the value can
      also be estimate by analysing correlation values between
      different sources. The latter will require further research
      and deployment.</p>
      <p>Table <a class="tbl" href="#tab2">2</a> shows the results
      of a shallow NN of one hidden layer with three units and a
      CNN with a convolutional layer follow by three hidden layers
      with 300 hidden units each. Figure <a class="fig" href=
      "#fig3">3</a> shows the real traffic for the two weeks and a
      half test data in blue and the predicted traffic in red in
      the CNN, when the elapsed time is 10 minutes, which is the
      best performance of the algorithm.</p>
      <p>Although in figure <a class="fig" href="#fig3">3</a> the
      performance is not particularly good as the traffic is
      overestimated by the model our aim is to compare the
      different performances of the different models with and
      without time-shifts, and for that purpose the model is good
      enough as it can follow the increment and decrement of the
      traffic during the hours of the days. The main problem that
      we can see in Figure <a class="fig" href="#fig3">3</a> is
      that the model accurately follows the weekends (see for
      example the two picks around time 1500) but it does
      overestimates the weekdays.</p>
      <div class="table-responsive" id="tab2">
        <div class="table-caption">
          <span class="table-number">Table 2:</span> <span class=
          "table-title">Performance comparison of the different
          elapsed values of the first traffic flow with two
          performance indexes</span>
        </div>
        <table class="table">
          <tbody>
            <tr>
              <td style="text-align:center;">Time Elapsed</td>
              <td colspan="2" style="text-align:center;">
                NN
                <hr />
              </td>
              <td colspan="2" style="text-align:center;">
                CNN
                <hr />
              </td>
            </tr>
            <tr>
              <td style="text-align:center;">(lr)2-5</td>
              <td style="text-align:center;">MAE</td>
              <td style="text-align:center;">MSE</td>
              <td style="text-align:center;">MAE</td>
              <td>MSE</td>
            </tr>
            <tr>
              <td style="text-align:center;">0min</td>
              <td style="text-align:center;">9.42203259763</td>
              <td style="text-align:center;">176.315432851</td>
              <td style="text-align:center;">9.41518072289</td>
              <td>176.059518072</td>
            </tr>
            <tr>
              <td style="text-align:center;">5min</td>
              <td style="text-align:center;">9.33664767278</td>
              <td style="text-align:center;">174.201821193</td>
              <td style="text-align:center;">9.33717012914</td>
              <td>174.202975856</td>
            </tr>
            <tr>
              <td style="text-align:center;">
              <strong>+10min</strong></td>
              <td style="text-align:center;">
              <strong>9.31253814673</strong></td>
              <td style="text-align:center;">
              <strong>173.290368391</strong></td>
              <td style="text-align:center;">
              <strong>9.31815626757</strong></td>
              <td><strong>173.302979202</strong></td>
            </tr>
            <tr>
              <td style="text-align:center;">+15min</td>
              <td style="text-align:center;">9.40423733065</td>
              <td style="text-align:center;">176.162459046</td>
              <td style="text-align:center;">9.40787981859</td>
              <td>176.172052154</td>
            </tr>
            <tr>
              <td style="text-align:center;">+20min</td>
              <td style="text-align:center;">9.41930152975</td>
              <td style="text-align:center;">176.4947619</td>
              <td style="text-align:center;">9.41932749364</td>
              <td>176.494772535</td>
            </tr>
          </tbody>
        </table>
      </div>
      <figure id="fig3">
        <img src=
        "../../../data/deliveryimages.acm.org/10.1145/3200000/3191649/images/www18companion-388-fig3.jpg"
        class="img-responsive" alt="Figure 3" longdesc="" />
        <div class="figure-caption">
          <span class="figure-number">Figure 3:</span> <span class=
          "figure-title">Comparison of the real traffic in blue and
          the predicted traffic in red for the elapsed time of 10
          minutes</span>
        </div>
      </figure>
      <figure id="fig4">
        <img src=
        "../../../data/deliveryimages.acm.org/10.1145/3200000/3191649/images/www18companion-388-fig4.jpg"
        class="img-responsive" alt="Figure 4" longdesc="" />
        <div class="figure-caption">
          <span class="figure-number">Figure 4:</span> <span class=
          "figure-title">Plot of the number of cars in <em>Y</em>
          <sub>0</sub></span>
        </div>
      </figure>
      <figure id="fig5">
        <img src=
        "../../../data/deliveryimages.acm.org/10.1145/3200000/3191649/images/www18companion-388-fig5.jpg"
        class="img-responsive" alt="Figure 5" longdesc="" />
        <div class="figure-caption">
          <span class="figure-number">Figure 5:</span> <span class=
          "figure-title">Boxplot of the values of the number of
          vehicles of <em>Y</em> <sub>0</sub></span>
        </div>
      </figure>
      <p>In order to further analyse the results we need the
      reference values. We have plot in Figure <a class="fig" href=
      "#fig4">4</a> a zoom of the real values of the number of
      vehicles in section <em>Y</em> <sub>0</sub>. This plot shows
      a zoom of the values used for training and test the models.
      Figure <a class="fig" href="#fig5">5</a> shows a boxplot of
      the values of the number of vehicles in section <em>Y</em>
      <sub>0</sub> with the minimum, maximum values and the median
      and quartiles. From these figures we can see that the maximum
      value is 45 vehicles and the minimum is 0. With these values
      in mind the results shown in Table <a class="tbl" href=
      "#tab2">2</a> shows that a value of around 9 in MAE is not an
      optimum value for the maximum and median vehicles we had on
      the road as shown in Figure <a class="fig" href=
      "#fig5">5</a>, and that the models need improvements. As we
      can see MSE results are high due to the fact that MSE
      penalises the higher error values. Therefore, we can infer
      from Table <a class="tbl" href="#tab1">1</a> and Figure
      <a class="fig" href="#fig3">3</a> that although the model
      follows quite well the lower values of vehicles, especially
      weekends data, it has difficulties in following the higher
      values of vehicles. We can see that traffic is overestimated
      by the model. Nonetheless, in these preliminary experiments
      our main purpose is to compare the different models with
      different time-shifts in order to know that our idea is
      supported. Further investigations will try to enhance the
      models as mentioned in Section <a class="sec" href=
      "#sec-7">5</a>, paying special attention to high values of
      traffic and weekdays.</p>
      <p>The results from the comparison of the different models in
      Table <a class="tbl" href="#tab2">2</a> show that the
      performance indexes are at their best value when the elapsed
      time of the data is around 10 minutes. This indicates that
      <em>X</em> <sub>1</sub> is influenced by <em>Y</em>
      <sub>0</sub> and therefore, what is happening with the
      traffic at one point of time in sector <em>Y</em>
      <sub>0</sub> will be reflected in sector <em>X</em>
      <sub>1</sub> 10 minutes later.</p>
    </section>
    <section id="sec-7">
      <header>
        <div class="title-info">
          <h2><span class="section-number">5</span> Limitations,
          Challenges and Future Works</h2>
        </div>
      </header>
      <p>The preliminary results of our work are promising. They
      show that modelling the cities with not only the inherent
      spatial component, but also with the temporal component, by
      means of shifting the data streams in time, can provide
      enhanced information about how the events of one part of the
      city can affect other parts of the city at an elapsed period
      of time.</p>
      <p>However, these are only preliminary results and as such
      they have some limitations. Further investigations are needed
      in order to accurately assess our method. In the development
      of our preliminary experiments we have encounter several
      issues that need to be fixed in a future extended
      research.</p>
      <p>The first limitation we found is that the traffic is
      ovestimate by the model. We can see in Figure <a class="fig"
      href="#fig3">3</a> that the weekend are followed in an
      accurate manner, but the weekdays are not, especially during
      high traffic. Therefore, we plan in the future to create two
      different models one for weekdays and one for weekends as
      they follow different patterns of traffic. Later on we will
      study whether the correlations in time still applies for both
      models (weekdays and weekends) or whether they follow
      different time-shift correlations. We plan also to enhance
      the models by trying to refine further the parameter
      estimation of the models. We will try different parameters
      and combination of algorithms. Another future work is to
      study a variety of performance indexed and to select the ones
      that best can evaluate and explain our particular
      experiments, taking into account the type of data. The second
      limitation is that we have only shift one stream on the basis
      that the rest of the streams are the baseline to know how the
      shift of this particular stream affects the model, or the
      output of the neural network. However in the future we plan
      to study how the shifts of different streams at the same time
      could affect the whole model. There are several combinations
      of shifts and a preliminary study on how this combinations
      can affect the model will be interesting in order to avoid
      the implementation of countless experiments. The third
      limitation is that we have focussed on the differences of the
      results with different time-shifts but our future work will
      need to careful study the influence of each variable and the
      statistical significance of each variation. The fourth
      limitation is that by visual inspection of the map we have
      inferred the spatial component and guess which traffic stream
      can be affected by which other traffic stream. A careful
      study on how the traffic in some sections affects the traffic
      in others could be interesting for our research. We can
      combine our approach with road infrastructure as in
      [<a class="bib" data-trigger="hover" data-toggle="popover"
      data-placement="top" href="#BibPLXBIB0003">3</a>].</p>
    </section>
    <section id="sec-8">
      <header>
        <div class="title-info">
          <h2><span class="section-number">6</span>
          Conclusions</h2>
        </div>
      </header>
      <p>This paper proposes a method to analyse spatio-temporal
      models of IoT data and in particular in smart city data
      streams. The novelty of this method lies in spatio-temporal
      analysis and using the time elapsed between data points in a
      location and the impact that it has on another location.
      Previous works have mainly dealt only with space or time
      separately. The existing works mainly focuses on how patterns
      are correlated at the same time or how the streams are
      related in a particular location. To evaluate our proposal,
      we use (convolutional) Neural Networks. Our primary results
      are promising and we believe our method can help citizens and
      city managers to have a better understanding of the impact of
      the events and changes in different parts of a city, by
      knowing when the consequences of an event will be seen in
      other parts of the city.</p>
    </section>
  </section>
  <section class="back-matter">
    <section id="sec-9">
      <header>
        <div class="title-info">
          <h2>ACKNOWLEDGMENTS</h2>
        </div>
      </header>
      <p>This work was supported by European Commissions in the
      H2020 for FIESTA-IoT project under grant agreement no.
      CNECT-ICT-643943 and EU H2020 IoTCrawler agreement no.
      779852. It was also partly funded through the R&amp;D Project
      Ref. TIN2016-79484-R by the Spanish Ministry of Economy and
      Competitiveness (AEI/FEDER, UE)</p>
    </section>
    <section id="ref-001">
      <header>
        <div class="title-info">
          <h2 class="page-brake-head">REFERENCES</h2>
        </div>
      </header>
      <ul class="bibUl">
        <li id="BibPLXBIB0001" label="[1]">Hussein Dia. 2001. An
        object-oriented neural network approach to short-term
        traffic forecasting. <em><em>European Journal of
        Operational Research</em></em> 131, 2 (2001), 253–261.</li>
        <li id="BibPLXBIB0002" label="[2]">Şefki Kolozali, Daniel
        Puschmann, Maria Bermudez-Edo, and Payam Barnaghi. 2016. On
        the Effect of Adaptive and Nonadaptive Analysis of
        Time-Series Sensory Data. <em><em>IEEE Internet of Things
        Journal</em></em> 3, 6 (2016), 1084–1098. <a class=
        "link-inline force-break" href=
        "https://doi.org/10.1109/JIOT.2016.2553080" target=
        "_blank">https://doi.org/10.1109/JIOT.2016.2553080</a>
        </li>
        <li id="BibPLXBIB0003" label="[3]">Daniel Kuemper, Ralf
        Toenjes, and Elke Pulvermueller. 2017. An
        infrastructure-based interpolation and propagation approach
        for IoT data analytics. In <em><em>Innovations in Clouds,
        Internet and Networks (ICIN), 2017 20th Conference
        on</em></em> . IEEE, 349–354.</li>
        <li id="BibPLXBIB0004" label="[4]">Kranti Kumar, M Parida,
        and VK Katiyar. 2013. Short term traffic flow prediction
        for a non urban highway using artificial neural network.
        <em><em>Procedia-Social and Behavioral Sciences</em></em>
        104 (2013), 755–764. <a class="link-inline force-break"
        href="https://doi.org/10.1016/j.sbspro.2013.11.170"
          target="_blank">https://doi.org/10.1016/j.sbspro.2013.11.170</a>
        </li>
        <li id="BibPLXBIB0005" label="[5]">Pedro Lopez-Garcia,
        Enrique Onieva, Eneko Osaba, Antonio&nbsp;D Masegosa, and
        Asier Perallos. 2016. A hybrid method for short-term
        traffic congestion forecasting using genetic algorithms and
        cross entropy. <em><em>IEEE Transactions on Intelligent
        Transportation Systems</em></em> 17, 2(2016), 557–569.</li>
        <li id="BibPLXBIB0006" label="[6]">Yisheng Lv, Yanjie Duan,
        Wenwen Kang, Zhengxi Li, and Fei-Yue Wang. 2015. Traffic
        flow prediction with big data: a deep learning approach.
        <em><em>IEEE Transactions on Intelligent Transportation
        Systems</em></em> 16, 2(2015), 865–873. <a class=
        "link-inline force-break" href=
        "https://doi.org/10.1109/TITS.2014.2345663" target=
        "_blank">https://doi.org/10.1109/TITS.2014.2345663</a>
        </li>
        <li id="BibPLXBIB0007" label="[7]">Tomas Mikolov, Ilya
        Sutskever, Kai Chen, Greg&nbsp;S Corrado, and Jeff Dean.
        2013. Distributed representations of words and phrases and
        their compositionality. In <em><em>Advances in neural
        information processing systems</em></em> . 3111–3119.</li>
        <li id="BibPLXBIB0008" label="[8]">Rodrigo Moraes,
        JoãO&nbsp;Francisco Valiati, and Wilson P&nbsp;GaviãO Neto.
        2013. Document-level sentiment classification: An empirical
        comparison between SVM and ANN. <em><em>Expert Systems with
        Applications</em></em> 40, 2 (2013), 621–633.</li>
        <li id="BibPLXBIB0009" label="[9]">Nicholas&nbsp;G Polson
        and Vadim&nbsp;O Sokolov. 2017. Deep learning for
        short-term traffic flow prediction. <em><em>Transportation
        Research Part C: Emerging Technologies</em></em> 79 (2017),
        1–17.</li>
        <li id="BibPLXBIB0010" label="[10]">D. Puschmann, P.
        Barnaghi, and R. Tafazolli. 2017. Adaptive Clustering for
        Dynamic IoT Data Streams. <em><em>IEEE Internet of Things
        Journal</em></em> 4, 1 (Feb 2017), 64–74. <a class=
        "link-inline force-break" href=
        "https://doi.org/10.1109/JIOT.2016.2618909" target=
        "_blank">https://doi.org/10.1109/JIOT.2016.2618909</a>
        </li>
        <li id="BibPLXBIB0011" label="[11]">Yu Zheng, Licia Capra,
        Ouri Wolfson, and Hai Yang. 2014. Urban Computing:
        concepts, methodologies, and applications. <em><em>ACM
        Transaction on Intelligent Systems and Technology (ACM
        TIST)</em></em> (2014). <a class="link-inline force-break"
          href="https://doi.org/10.1145/2629592" target=
          "_blank">https://doi.org/10.1145/2629592</a>
        </li>
      </ul>
    </section>
  </section>
  <section id="foot-001" class="footnote">
    <header>
      <div class="title-info">
        <h2>FOOTNOTE</h2>
      </div>
    </header>
    <p id="fn1"><a href="#foot-fn1"><sup>⁎</sup></a>Produces the
    permission block, and copyright information</p>
    <p id="fn3"><a href="#foot-fn3"><sup>1</sup></a><a class=
    "link-inline force-break" href=
    "http://iot.ee.surrey.ac.uk:8080/">http://iot.ee.surrey.ac.uk:8080/</a></p>
    <p id="fn4"><a href="#foot-fn4"><sup>2</sup></a><a class=
    "link-inline force-break" href=
    "https://maps.google.com/">https://maps.google.com/</a></p>
    <div class="bibStrip">
      <p>This paper is published under the Creative Commons
      Attribution 4.0 International (CC-BY&nbsp;4.0) license.
      Authors reserve their rights to disseminate the work on their
      personal and corporate Web sites with the appropriate
      attribution.</p>
      <p><em>WWW '18, April 23-27, 2018, Lyon, France</em></p>
      <p>© 2018; IW3C2 (International World Wide Web Conference
      Committee), published under Creative Commons CC-BY&nbsp;4.0
      License. ACM ISBN 978-1-4503-5640-4/18/04.<br />
      DOI: <a class="link-inline force-break" target="_blank" href=
      "https://doi.org/10.1145/3184558.3191649">https://doi.org/10.1145/3184558.3191649</a></p>
    </div>
  </section>
  <div class="pubHistory">
    <p></p>
  </div>
</body>
</html>
