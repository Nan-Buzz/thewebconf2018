<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> <head>  <title>Computationally Inferred Genealogical Networks Uncover Long-Term Trends in Assortative Mating</title>  <!-- Copyright (c) 2010-2015 The MathJax Consortium --><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>  <meta name="viewport" content="width=device-width; initial-scale=1.0;"></meta>  <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>  <link media="screen, print" rel="stylesheet"    href="../../../data/dl.acm.org/pubs/lib/css/bootstrap.min.css"/><link media="screen, print" rel="stylesheet"    href="../../../data/dl.acm.org/pubs/lib/css/bootstrap-theme.min.css"/><link media="screen, print" rel="stylesheet"    href="../../../data/dl.acm.org/pubs/lib/css/main.css"/><script src="../../../data/dl.acm.org/pubs/lib/js/jquery.min.js" type="text/javascript"></script>  <script src="../../../data/dl.acm.org/pubs/lib/js/bootstrap.min.js" type="text/javascript"></script>  <script src="../../../data/dl.acm.org/pubs/lib/js/bibCit.js" type="text/javascript"></script>  <script src="../../../data/dl.acm.org/pubs/lib/js/divTab.js" type="text/javascript"></script>  <script type="text/javascript"    src="../../../data/dl.acm.org/pubs/lib/js/MathJax.TeX-AMS_CHTML.js"></script>  <script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script> </head> <body id="main">  <section class="front-matter">   <section>    <header class="title-info">    <div class="journal-title">     <h1>      <span class="title">Computationally Inferred Genealogical Networks Uncover Long-Term Trends in Assortative Mating</span>      <br/>      <span class="subTitle"/>     </h1>    </div>    </header>    <div class="authorGroup">    <div class="author">     <span class="givenName">Eric</span>     <span class="surName">Malmi</span>,     Aalto University, Espoo, Finland, <a href="mailto:eric.malmi@aalto.fi">eric.malmi@aalto.fi</a>    </div>    <div class="author">     <span class="givenName">Aristides</span>     <span class="surName">Gionis</span>,     Aalto University, Espoo, Finland, <a href="mailto:aristides.gionis@aalto.fi">aristides.gionis@aalto.fi</a>    </div>    <div class="author">     <span class="givenName">Arno</span>     <span class="surName">Solin</span>,     Aalto University, Espoo, Finland, <a href="mailto:arno.solin@aalto.fi">arno.solin@aalto.fi</a>    </div>                </div>    <br/>    <div class="pubInfo">    <p>DOI: <a href="https://doi.org/10.1145/3178876.3186136" target="_blank">https://doi.org/10.1145/3178876.3186136</a>     <br/>WWW '18: <a href="https://doi.org/10.1145/3178876" target="_blank">Proceedings of The Web Conference 2018</a>, Lyon, France, April 2018</p>    </div>    <div class="abstract">    <p>     <small>Genealogical networks, also known as family trees or population pedigrees, are commonly studied by genealogists wanting to know about their ancestry, but they also provide a valuable resource for disciplines such as digital demography, genetics, and computational social science. These networks are typically constructed by hand through a very time-consuming process, which requires comparing large numbers of historical records manually. We develop computational methods for automatically inferring large-scale genealogical networks. A comparison with human-constructed networks attests to the accuracy of the proposed methods. To demonstrate the applicability of the inferred large-scale genealogical networks, we present a longitudinal analysis on the mating patterns observed in a network. This analysis shows a consistent tendency of people choosing a spouse with a similar socioeconomic status, a phenomenon known as <em>assortative mating</em>. Interestingly, we do not observe this tendency to consistently decrease (nor increase) over our study period of 150 years.</small>    </p>    </div>    <div class="CCSconcepts">    <p> <small> <span style="font-weight:bold;">CCS Concepts:</span> &#x2022;<strong> Information systems </strong>&#x2192; <strong>Entity resolution;</strong> &#x2022;<strong> Computing methodologies </strong>&#x2192; <em>Supervised learning by classification;</em> &#x2022;<strong> Applied computing </strong>&#x2192; <em>Sociology;</em></small> </p>    </div>    <div class="classifications">    <div class="author">     <span style="font-weight:bold;">      <small>Keywords:</small>     </span>     <span class="keyword">      <small>genealogy; family tree; pedigree; population reconstruction; probabilistic record linkage; assortative mating; social stratification; homogamy</small>     </span>    </div>    <br/>    <div class="AcmReferenceFormat">     <p>      <small>       <span style="font-weight:bold;">ACM Reference Format:</span>       <br/>       Eric Malmi, Aristides Gionis, and Arno Solin. 2018. Computationally Inferred Genealogical Networks Uncover Long-Term Trends in Assortative Mating. In <em>WWW 2018: The 2018 Web Conference,</em>       <em>April 23&#x2013;27, 2018 (WWW 2018),</em>       <em> Lyon, France. ACM, New York, NY, USA</em> 10 Pages. <a href="https://doi.org/10.1145/3178876.3186136" class="link-inline force-break"       target="_blank">https://doi.org/10.1145/3178876.3186136</a></small>     </p>    </div>    </div>   </section>  </section>  <section class="body">   <section id="sec-4">    <header>    <div class="title-info">     <h2>      <span class="section-number">1</span> Introduction</h2>    </div>    </header>    <figure id="fig1">    <img src="../../../data/deliveryimages.acm.org/10.1145/3190000/3186136/images/www2018-145-fig1.jpg" class="img-responsive" alt="Figure 1"      longdesc=""/>    <div class="figure-caption">     <span class="figure-number">Figure 1:</span>     <span class="figure-title">A subgraph of a genealogical network automatically inferred by linking birth records. The subgraph spans 13 generations.</span>    </div>    </figure>    <p>    <em>Where do we come from? What are we? Where are we going?</em> These questions, posed by the famous painter Paul Gauguin, resonate with many people. An example of the allure of the first question can be attested in the popularity of genealogy, the study of family history. Genealogical research is typically conducted by studying a large number of historical vital records, such as birth and marriage records, and trying to link records referring to the same person. This process is nowadays facilitated by numerous popular online services, such as <em>Ancestry.com</em>, <em>MyHeritage</em>, and <em>Geni</em>, and increasingly with genetic analysis. Nevertheless, constructing a genealogical network (also known as family tree or population pedigree) is still a very time consuming process, entailing lots of manual work.</p>    <p>In recent years, lots of efforts have been focused on <em>indexing</em> historical vital records available in physical archives as well as in online repositories in the format of scanned images. Crowdsourcing projects organized, for example, by online genealogy services aim to do this kind of research by attracting people capable of interpreting old handwriting. Furthermore, there are also recent efforts at developing new optical character recognition (OCR) techniques to automate the process&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0013">13</a>]. The availability of indexed records makes genealogical research amenable to new computer-supported and, to some extent, even fully-automatic approaches.</p>    <p>Our goal in this paper is to develop novel computational methods for inferring large-scale genealogical networks by linking vital records. We propose two supervised inference methods, <font style="font-variant: small-caps">BinClass</font> and <font style="font-variant: small-caps">Collective</font>, which we train and test on Finnish data from the mid 17th to the late 19th century. More specifically, we apply these methods to link a large collection of indexed vital records from Finland, constructing a genealogical network whose largest component contains 2.6 million individuals. A small subgraph of this component is visualized in Figure&#x00A0;<a class="fig" href="#fig1">1</a>, where people are colored by their social class which is based on their father&#x0027;s occupation. The class information is used later when analyzing assortative mating. The construction of the full network takes only about one hour, which shows that it is vastly more scalable than the traditional manual approach which would probably require at least dozens of man-years for the same task. However, at its current stage, the accuracy of the automatic approach is not comparable to a careful human genealogist, but it can still support the work of the genealogist by providing the most probable parents for each individual, narrowing the search space.</p>    <p>From the methodological point of view, the main idea behind the proposed approaches is to cast the network-inference task into multiple binary classification tasks. Furthermore, our second approach, <font style="font-variant: small-caps">Collective</font>, aims at capturing the observation that people tend to have children with the same partner, so if, for example, a father has multiple children, the mothers of the children should not be inferred independently. Incorporating this notion to our optimization problem, interestingly, leads to the well-known facility-location problem as well as an increase in the accuracy of the links.</p>    <p>In addition to family history, genealogical networks can be applied to several other domains, such as digital demography&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0030">30</a>], genetics, human mobility, epidemiology, and computational social science. In this work, we demonstrate the applicability of the inferred network by analyzing <em>assortative mating</em>, that is, a general tendency of people to choose a spouse with a similar socioeconomic background. Mating choices have been shown to be an important driver for income inequality&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0014">14</a>].</p>    <p>From the perspective of computational social science&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0021">21</a>], genealogical networks offer particularly interesting analysis opportunities because of the long time window these networks cover. Compared to social-media data, which is typically used for computational social-science studies, genealogical networks contain less granular data about the people in the network, but they allow us to observe phenomena that occur over multiple generations. This aspect of genealogical networks enables us to quantify long-term trends in our society, as done for assortative mating in this work. Therefore, genealogical networks can provide answers not only to the first question asked in the beginning of this section but also to the third one: <em>Where are we going?</em>    </p>    <p>Our main contributions in this paper are summarized as follows:</p>    <ul class="list-no-style">    <li id="list1" label="&#x2022;">We propose a principled probabilistic method, <font style="font-variant: small-caps">BinClass</font>, for inferring large-scale genealogical networks by linking vital records.<br/></li>    <li id="list2" label="&#x2022;">We perform an experimental evaluation, which shows that 61.6% of the links inferred by <font style="font-variant: small-caps">BinClass</font> are correct. The accuracy obtained by <font style="font-variant: small-caps">BinClass</font> surpasses the accuracy (56.9%) of a recently proposed <font style="font-variant: small-caps">NaiveBayes</font> method&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0024">24</a>]. Furthermore, we show that the link probability estimates provided by <font style="font-variant: small-caps">BinClass</font> can be used to reliably control the precision&#x2013;recall trade-off of the inferred network.<br/></li>    <li id="list3" label="&#x2022;">We present a novel inference method, called <font style="font-variant: small-caps">Collective</font>, which aims to improve disambiguation of linked entities, and does so by considering the genealogical-network inference task as a global optimization task, instead of inferring family relationships independently. <font style="font-variant: small-caps">Collective</font> further improves the overall link accuracy to 65.1%. However, contrasted to <font style="font-variant: small-caps">BinClass</font>, <font style="font-variant: small-caps">Collective</font> does not provide link probabilities.<br/></li>    <li id="list4" label="&#x2022;">Finally, we demonstrate the relevance and applicability of automatically inferred genealogical networks by performing an analysis on assortative mating. The analysis suggests that assortative mating existed in Finland between 1735 and 1885, but it did not consistently decrease or increase during this period.<br/></li>    </ul>   </section>   <section id="sec-5">    <header>    <div class="title-info">     <h2>      <span class="section-number">2</span> Data</h2>    </div>    </header>    <p>Our genealogical network inference method is based on linking vital records. The method is trained and evaluated using a human-constructed network. Next, we present these two data sources.</p>    <section id="sec-6">    <header>     <div class="title-info">      <h3>       <span class="section-number">2.1</span> Population Records</h3>     </div>    </header>    <p>The Swedish Church Law 1686 obliged the parishes in Sweden (and in Finland, which used to be part of Sweden) to keep records of births, marriages, and burials, across all classes of the society. The &#x2018;HisKi&#x2019; project, an effort started in the 1980s, aims to digitally index the hand-written Finnish parish registers. The digitized data contains about 5&#x00A0;million records of births and a total of 5&#x00A0;million records of deaths, marriages and migration. The HisKi dataset is publicly available at <a class="link-inline force-break" href="http://hiski.genealogia.fi/hiski?en">http://hiski.genealogia.fi/hiski?en</a>, except for the last 100 years due to current legislation.</p>    <p>Each birth record typically contains the name, birth place, and birth date of the child in addition to the names and occupations of the parents. The goal of the genealogical network inference problem is to link the birth records to the birth records of the parents, creating a family tree with up to millions of individuals.</p>    <p>Currently, we only have access to data from Finland, but similar indexed datasets can be expected to become available for other countries through projects such as READ<a class="fn" href="#fn1" id="foot-fn1"><sup>1</sup></a> which develop optical character recognition (OCR) methods for historical hand-written documents.</p>    </section>    <section id="sec-7">    <header>     <div class="title-info">      <h3>       <span class="section-number">2.2</span> Ground Truth</h3>     </div>    </header>    <p>We have obtained a genealogical network consisting of 116&#x00A0;640 individuals constructed by an individual genealogist over a long period of time. To use this network as a ground truth, we first match these individuals to the birth records in the HisKi dataset. An individual is considered matched if we find exactly one birth record with the same normalized first name and last name and the same birth date. Then, we find parent&#x2013;child edges where both individuals are matched to a birth record, yielding 18&#x00A0;731 ground-truth links.</p>    <p>Finally, the ground-truth links are split into a training set (70%) and a test set (30%). This is done by computing the connected components of the network, sorting the components by size in descending order, and assigning the nodes into two buckets in a round-robin fashion: First, assign the largest component to the training set. Second, assign the second largest component to the test set. Continue alternating between the buckets, however, skipping a bucket if its target size has been reached. Compared to directly splitting people into the two buckets, this approach ensures that there are no edges going across the two buckets that would thus be lost. In the end, we get 5&#x00A0;631 test links out of which 42% are between mother and a child.</p>    </section>   </section>   <section id="sec-8">    <header>    <div class="title-info">     <h2>      <span class="section-number">3</span> Genealogical Network Inference</h2>    </div>    </header>    <p>Genealogical networks are typically constructed manually by linking vital records, such as birth, marriage, and death certificates. The main challenges in the linking process are posed by duplicate names, spelling variations and missing records.</p>    <section id="sec-9">    <header>     <div class="title-info">      <h3>       <span class="section-number">3.1</span> Problem Definition</h3>     </div>    </header>    <p>A <em>genealogical network</em> is defined as a directed graph where the nodes correspond to people and the edges correspond to family relationships between them. We consider only two type of edges: <em>father</em> edges, going from a father to a child, and <em>mother</em> edges, going from a mother to a child. Each node can have at most one biological father and mother, but they are not necessarily known. Because of the temporal ordering of the nodes, this graph is a directed acyclic graph (DAG).</p>    <p>Each person in the graph is represented by the person&#x0027;s birth record. Given a set of birth records <em>V</em>, the objective of the genealogical network inference is to link each birth record <em>a</em> &#x2208; <em>V</em> to the birth records of the person&#x0027;s mother <em>M<sub>a</sub>     </em> &#x2208; <em>V</em> and father <em>F<sub>a</sub>     </em> &#x2208; <em>V</em>. In addition to the birth records, the inference method gets as input a set of mother candidates <span class="inline-equation"><span class="tex">$C^\text{m} \subseteq V$</span>     </span> and a set of father candidates <span class="inline-equation"><span class="tex">$C^\text{f} \subseteq V$</span>     </span> for each child. In each method studied in this paper, the candidate sets are defined as the people who were born between 10 and 70 years before the child and whose normalized first and last name match to the parent name mentioned in the child&#x0027;s record. <a class="fn" href="#fn2" id="foot-fn2"><sup>2</sup></a>    </p>    <p>Since the true parents are ambiguous, the output should be a probability distribution over different parent candidates, including the case &#x2205; that a parent is not among the candidates.</p>    </section>    <section id="sec-10">    <header>     <div class="title-info">      <h3>       <span class="section-number">3.2</span> Naive Bayes Baseline</h3>     </div>    </header>    <p>This baseline method [<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0024">24</a>] first constructs an attribute similarity vector <em>&#x03B3;</em> for each (child, candidate parent) pair. The vector consists of the following five features: a Jaro&#x2013;Winkler name similarity for first names, last names and patronyms, and the age difference as well as the birth place distance between the child and the parent.</p>    <p>Assuming that the family links are independent, the probability of each mother candidate <em>m</em> (and similarly of each father candidate) for person <em>a</em> can be written as follows, using the Bayes&#x2019; rule <div class="table-responsive" id="eq1">      <div class="display-equation">       <span class="tex mytex">\begin{equation} p\left(M_{a} = m \mid \gamma \right) = \frac{p\left(M_{a} =m\right)\frac{p\left(\gamma ^{a,m} \mid M_{a} =m\right)}{p\left(\gamma ^{a,m} \mid M_{a} \ne m\right)}}{\sum _{m^{\prime } \in C^\text{m} _a \cup \emptyset } p\left(M_{a} =m^{\prime }\right) \frac{p\left(\gamma ^{a,m^{\prime }} \mid M_{a} =m^{\prime }\right)}{p\left(\gamma ^{a,m^{\prime }} \mid M_{a} \ne m^{\prime }\right)}}, \end{equation} </span>       <br/>       <span class="equation-number">(1)</span>      </div>     </div> where <em>p</em>(<em>M<sub>a</sub>     </em> = <em>m</em>) is the prior probability of <em>m</em> and <em>p</em>(<em>&#x03B3;</em>     <sup>      <em>a</em>, <em>m</em>     </sup>&#x2223;<em>M<sub>a</sub>     </em> = <em>m</em>) denotes the likelihood of observing the attribute similarities <em>&#x03B3;</em>     <sup>      <em>a</em>, <em>m</em>     </sup>. The derivation of Equation&#x00A0;(<a class="eqn" href="#eq1">1</a>) is given in the earlier work of&#x00A0;Malmi et&#x00A0;al. [<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0024">24</a>], and we adopt it in this paper.</p>    <p>Since the links are assumed to be independent, the log-likelihood function over all links is given by the sum of the link log-probabilities. Let <em>x</em>     <sub>      <em>a</em>, <em>m</em>     </sub> &#x2208; {0, 1} be a random variable denoting whether person <em>a</em> is linked to parent <em>m</em>. This allows us to write the likelihood function&#x00A0;as <div class="table-responsive" id="eq2">      <div class="display-equation">       <span class="tex mytex">\begin{align} \max _{x} \quad &#x0026; \bigg [ \sum _{a,m} \log p\left(M_{a} =m \mid \gamma \right) x_{a,m} \nonumber \\ &#x0026; + \sum _{a^{\prime },f} \log p\left(F_{a^{\prime }} =f \mid \gamma \right) x_{a^{\prime },f} \bigg ] \end{align} </span>       <br/>       <span class="equation-number">(2)</span>      </div>     </div>     <div class="table-responsive" id="eq3">      <div class="display-equation">       <span class="tex mytex">\begin{align} \text{such that}\quad &#x0026; \sum _m x_{a,m} = 1, \quad \mbox{for all } a, \end{align} </span>       <br/>       <span class="equation-number">(3)</span>      </div>     </div>     <div class="table-responsive" id="eq4">      <div class="display-equation">       <span class="tex mytex">\begin{align} &#x0026; \sum _f x_{a,f} = 1, \quad \mbox{for all } a, \end{align} </span>       <br/>       <span class="equation-number">(4)</span>      </div>     </div>     <div class="table-responsive" id="eq5">      <div class="display-equation">       <span class="tex mytex">\begin{align} &#x0026; x_{a,m}, x_{a,f} \in \lbrace 0, 1\rbrace , \quad \mbox{for all } a, m, f. \end{align} </span>       <br/>       <span class="equation-number">(5)</span>      </div>     </div> The maximum likelihood solution for this non-collective genealogical network inference problem can be obtained simply by optimizing the parent links independently. The method assumes that the components of <em>&#x03B3;</em>     <sup>      <em>a</em>, <em>m</em>     </sup>, corresponding to different attribute similarities, are also independent. Therefore, we call this method <font style="font-variant: small-caps">NaiveBayes</font>.</p>    <p>Next we present the two methods proposed in this paper, which improve over <font style="font-variant: small-caps">NaiveBayes</font>.</p>    </section>    <section id="sec-11">    <header>     <div class="title-info">      <h3>       <span class="section-number">3.3</span> Binary-Classification Approach</h3>     </div>    </header>    <p>The key observation behind this approach is that likelihood ratios can be approximated with probabilistic discriminative classifiers&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0009">9</a>]. This means that instead of estimating the component-wise probability distributions <span class="inline-equation"><span class="tex">$p\left(\gamma ^{a,m}_{i} \mid M_{a} =m\right)$</span>     </span>, as done in <font style="font-variant: small-caps">NaiveBayes</font>, we can approximate the two likelihood ratios in (<a class="eqn" href="#eq1">1</a>) by training a probabilistic binary classifier to separate attribute similarity vectors <em>&#x03B3;</em>     <sup>      <em>a</em>, <em>m</em>     </sup> corresponding to matching and non-matching (child, candidate parent) pairs. The most straightforward approximation is given by <div class="table-responsive">      <div class="display-equation">       <span class="tex mytex">\[ \frac{p\left(\gamma ^{a,m} \mid M_{a} =m\right)}{p\left(\gamma ^{a,m} \mid M_{a} \ne m\right)} \approx \frac{s\left(\gamma ^{a,m} \right)}{1 - s\left(\gamma ^{a,m} \right)}, \] </span>       <br/>      </div>     </div> where <em>s</em>(<em>&#x03B3;</em>     <sup>      <em>a</em>, <em>m</em>     </sup>) &#x2208; [0,&#x2009;1] is the output of a probabilistic binary classifier trained to separate matching <em>&#x03B3;</em>     <sup>      <em>a</em>, <em>m</em>     </sup> vectors from non-matching ones. In some cases, the probabilities predicted by the classifier can be distorted, which can be countered by calibrating the probabilities&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0026">26</a>].</p>    <p>We choose XGBoost&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0006">6</a>] as the classifier <em>s</em> since it has been successfully employed for a record linkage task&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0022">22</a>, <a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0028">28</a>] as well as other classification tasks previously. In our case, the probabilities predicted by the XGBoost classifier are fairly accurate (calibration does not improve the Brier score [<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0004">4</a>] of the classifier) so calibration is not used. This approach is called <font style="font-variant: small-caps">BinClass</font>.</p>    <p>The key advantages that <font style="font-variant: small-caps">BinClass</font> offers over <font style="font-variant: small-caps">NaiveBayes</font> are: (<em>i</em>)&#x00A0;we do not have to make the independence assumption for attribute similarities, (<em>ii</em>)&#x00A0;we can use any existing classifier that provides probabilities as output, and (<em>iii</em>)&#x00A0;it is very easy to add new features to the attribute similarity vector and retrain the model, whereas in <font style="font-variant: small-caps">NaiveBayes</font> we have to estimate two new likelihood distributions for each new feature, which requires manually selecting a suitable distribution based on the type of the new feature.</p>    <p>In total, we use 20 attribute similarity features <em>&#x03B3;</em>, which can be grouped into the following categories:</p>    <ol class="list-no-style">     <li id="list5" label="(1)"><strong>Candidate age</strong> : The age of the candidate parent at the time of the child&#x0027;s birth and the difference to the reported parent age if available (for mothers, an approximated age is reported in 40% of the birth records).<br/></li>     <li id="list6" label="(2)"><strong>Geographical distance</strong> : The distance between the birth places of the child and the candidate parent.<br/></li>     <li id="list7" label="(3)"><strong>Names</strong> : The similarity of the <em>first</em> names, <em>middle</em> names (if any), <em>last</em> names, and <em>patronyms</em> reported in the child&#x0027;s record for the parent and in the candidate&#x0027;s record for the child.<br/></li>     <li id="list8" label="(4)"><strong>NaiveBayes</strong> : The probability estimated by the <font style="font-variant: small-caps">NaiveBayes</font> method is used as a feature.<br/></li>     <li id="list9" label="(5)"><strong>Gender</strong> : A binary variable indicating whether we are matching a father or a mother.<br/></li>     <li id="list10" label="(6)"><strong>Location</strong> : The coordinates of the child&#x0027;s birth location.<br/></li>     <li id="list11" label="(7)"><strong>Birth year</strong> : The birth year of the child.<br/></li>     <li id="list12" label="(8)"><strong>Candidate death</strong> : A binary variable indicating whether there is a non-ambiguous death record, which indicates that the candidate had died before the birth of the child, and another variable indicating how long before the birth the death occurred (0 if it is not known to occur before the birth).<br/></li>    </ol>    <p>Feature groups (6)&#x2013;(8) as well as middle name and patronym similarities are not used by the <font style="font-variant: small-caps">NaiveBayes</font> model. Feature groups (6) and (7) are not useful on their own, since they are the same for each candidate parent of a child, but they might be informative together with other features. For instance, name similarity patterns might be time- or location-dependent.</p>    <p>To compute the features regarding the death year of the candidate (feature group (8)), we first match the death records to birth records by finding the record pairs that (<em>i</em>)&#x00A0;have the same normalized first name, last name, and patronym, (<em>ii</em>) for which the reported age at death matches to the birth year &#x00B1; 1 year, and (<em>iii</em>)&#x00A0;the birth and the death location are at most 60 kilometers apart. Then we link a death record to a birth record only if the death record has only one feasible match. This approach allows us to infer the death time for 12% of the birth records.<a class="fn" href="#fn3" id="foot-fn3"><sup>3</sup></a>    </p>    </section>    <section id="sec-12">    <header>     <div class="title-info">      <h3>       <span class="section-number">3.4</span> Collective Approach</h3>     </div>    </header>    <p>Both <font style="font-variant: small-caps">NaiveBayes</font> and <font style="font-variant: small-caps">BinClass</font> assume that the family links are independent, which leads to some unlikely outcomes. In particular, the number of spouses per person becomes unrealistically high which is illustrated in Figure&#x00A0;<a class="fig" href="#fig2">2</a> which shows a subgraph inferred by <font style="font-variant: small-caps">NaiveBayes</font>. The algorithm has inferred a person called <em>Anders Tihoin</em> to have fathered six children&#x2014;each with a different mother. While this is possible, it is very likely that at least the mothers of <em>Catharina</em> (the left one), <em>Anna Helena</em> and <em>Anders</em> are actually the same person, since the mother&#x0027;s name for these children is almost the same <em>(Maria Airaxin(en))</em>. <figure id="fig2">      <img src="../../../data/deliveryimages.acm.org/10.1145/3190000/3186136/images/www2018-145-fig2.jpg" class="img-responsive" alt="Figure 2"       longdesc=""/>      <div class="figure-caption">       <span class="figure-number">Figure 2:</span>       <span class="figure-title">A sample subnetwork inferred by <font style="font-variant: small-caps">NaiveBayes</font> with colors corresponding to gender. If each child is matched to the most probable father&#x2013;mother pair independently, the number of spouses per person can be unrealistically high.</span>      </div>     </figure>    </p>    <p>To address this problem, we propose to minimize the number mother&#x2013;father pairs in addition to maximizing the probability of the inferred links. Let <em>y</em>     <sub>      <em>m</em>, <em>f</em>     </sub> &#x2208; {0, 1} indicate whether any child has been assigned to mother&#x2013;father pair (<em>m</em>, <em>f</em>). Now we can write the collective genealogical network inference problem as <div class="table-responsive" id="eq6">      <div class="display-equation">       <span class="tex mytex">\begin{align} \max _{x,y} \quad &#x0026; \bigg [- \lambda \sum _{m,f} y_{m,f} + \sum _{a,m} \log p\left(M_{a} =m \mid \gamma \right) x_{a,m} \nonumber \\ &#x0026; + \sum _{a^{\prime },f} \log p\left(F_{a^{\prime }} =f \mid \gamma \right) x_{a^{\prime },f} \bigg ] \end{align} </span>       <br/>       <span class="equation-number">(6)</span>      </div>     </div>     <div class="table-responsive" id="eq7">      <div class="display-equation">       <span class="tex mytex">\begin{align} \text{such that}\quad &#x0026; \sum _a x_{a,m} x_{a,f} \le y_{m,f}, \quad \mbox{for all } m, f, \end{align} </span>       <br/>       <span class="equation-number">(7)</span>      </div>     </div>     <div class="table-responsive" id="eq8">      <div class="display-equation">       <span class="tex mytex">\begin{align} &#x0026; \sum _m x_{a,m} = 1, \quad \sum _f x_{a,f} = 1, \quad \mbox{for all } a, \end{align} </span>       <br/>       <span class="equation-number">(8)</span>      </div>     </div>     <div class="table-responsive" id="eq9">      <div class="display-equation">       <span class="tex mytex">\begin{align} &#x0026; x_{a,m}, x_{a,f}, y_{m,f} \in \lbrace 0, 1\rbrace , \quad \mbox{for all } a, m, f, \end{align} </span>       <br/>       <span class="equation-number">(9)</span>      </div>     </div> where <em>&#x03BB;</em> &#x2265; 0 controls the penalty induced by each extra parent pair (or discount for merging two parent pairs into one).</p>    <p>This optimization problem is an instance of the <em>uncapacitated facility-location problem</em>, where parent pairs correspond to facilities, child nodes to demand sites, and the parameter <em>&#x03BB;</em> to the facility opening cost. The uncapacitated facility-location problem is <strong>NP</strong>-hard for general graphs so we adopt a greedy approach presented in Algorithm&#x00A0;1 . Assuming that each person has <em>c</em> candidate mothers and fathers, the time complexity of this algorithm is <span class="inline-equation"><span class="tex">$\mathcal {O}\left(c^2|V| + |V| \log |V|\right)$</span>     </span>, which shows that it scales well in the number of people to be linked. The input probabilities <em>p</em> are computed with <font style="font-variant: small-caps">BinClass</font>. Note that the facility assignment costs, that are based on the probabilities, are not necessarily a metric, so the approximation guarantees for methods, such as [<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0016">16</a>], do not necessarily hold in our problem setting.</p>    <p>     <img src="../../../data/deliveryimages.acm.org/10.1145/3190000/3186136/images/www2018-145-img1.svg" class="img-responsive" alt="" longdesc=""/>    </p>    <p>This method is called <font style="font-variant: small-caps">Collective</font>. It outputs a genealogical network, where some of the links inferred by <font style="font-variant: small-caps">BinClass</font> have been rewired in order to reduce the number of spouses. A limitation of <font style="font-variant: small-caps">Collective</font> is that it does not recompute the link probabilities (the marginal distributions of the random variables <em>x</em>, indicating the parents). One approach for computing the marginal distributions would be to adopt a Markov chain Monte Carlo (MCMC) method, which samples genealogical networks by proposing swaps to the parent assignments. However, to obtain a meaningful level of precision for the link probability estimates we need to sample a very large number genealogical networks, which renders such an MCMC approach non-scalable. Thus, in this work, we are not experimenting with link-probability estimation for <font style="font-variant: small-caps">Collective</font>.</p>    </section>   </section>   <section id="sec-13">    <header>    <div class="title-info">     <h2>      <span class="section-number">4</span> Experimental Evaluation</h2>    </div>    </header>    <p>Next, we compare the proposed methods, <font style="font-variant: small-caps">BinClass</font> and <font style="font-variant: small-caps">Collective</font>, to two baseline methods, <font style="font-variant: small-caps">NaiveBayes</font> [<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0024">24</a>] and <font style="font-variant: small-caps">RandomCand</font>, the latter of which randomly assigns the parents among the set of candidates. The methods are evaluated by computing their <em>link accuracy</em> which is the fraction of ground-truth child&#x2013;parent links correctly inferred by the method. To use <font style="font-variant: small-caps">Collective</font>, we first need to optimize <em>&#x03BB;</em>&#x2014;the penalty induced by each extra parent pair. The optimization is done using the training ground-truth data and the results are shown in Figure&#x00A0;3a . The training accuracy is maximized when <em>&#x03BB;</em> = 1.6.</p>    <p>The results for all methods are presented in Table&#x00A0;<a class="tbl" href="#tab1">1</a>. <font style="font-variant: small-caps">BinClass</font> clearly outperforms the two baseline methods, and <font style="font-variant: small-caps">Collective</font> further improves the accuracy of <font style="font-variant: small-caps">BinClass</font> from 61.6% to 65.1%.</p>    <div class="table-responsive" id="tab1">    <div class="table-caption">     <span class="table-number">Table 1:</span>     <span class="table-title">Accuracy of the links inferred with different methods.</span>    </div>    <table class="table">     <thead>      <tr>       <th style="text-align:left;">       <strong>Method</strong>       </th>       <th style="text-align:left;">       <font style="font-variant: small-caps">RandomCand</font>       </th>       <th style="text-align:left;">       <font style="font-variant: small-caps">NaiveBayes</font>       </th>       <th style="text-align:left;">       <font style="font-variant: small-caps">BinClass</font>       </th>       <th style="text-align:left;">       <font style="font-variant: small-caps">Collective</font>       </th>      </tr>     </thead>     <tbody>      <tr>       <td style="text-align:left;">       <strong>Accuracy</strong>       </td>       <td style="text-align:left;">12.5%</td>       <td style="text-align:left;">56.9%</td>       <td style="text-align:left;">61.6%</td>       <td style="text-align:left;">       <strong>65.1%</strong>       </td>      </tr>     </tbody>    </table>    </div>    <p>To evaluate the accuracy of the link probabilities estimated by <font style="font-variant: small-caps">BinClass</font>, we bin the probabilities and compute accuracy within each bin. The results presented in Figure&#x00A0;3b show that the estimated link probabilities are somewhat pessimistic, but overall, they are well in line with the link accuracies. Therefore, we can use the link probabilities to filter out links below a desired certainty level when analyzing the inferred network, as done in the next section. This filtering improves the precision of the inferred network but naturally also decreases the recall as illustrated in Figure&#x00A0;3c . In total, <font style="font-variant: small-caps">BinClass</font> finds 1.8 million child&#x2013;mother links and 2.5 million child&#x2013;father links. If we require a minimum link probability of 90%, as done in the next section, we are still left with 253&#x00A0;814 child&#x2013;mother links and 341&#x00A0;010 child&#x2013;father links. <figure id="fig3">     <img src="../../../data/deliveryimages.acm.org/10.1145/3190000/3186136/images/www2018-145-fig3.jpg" class="img-responsive" alt="Figure 3"      longdesc=""/>     <div class="figure-caption">      <span class="figure-number">Figure 3:</span>      <span class="figure-title">Experimental results on genealogical network inference.</span>     </div>    </figure>    <figure id="fig4">     <img src="../../../data/deliveryimages.acm.org/10.1145/3190000/3186136/images/www2018-145-fig4.jpg" class="img-responsive" alt="Figure 4"      longdesc=""/>     <div class="figure-caption">      <span class="figure-number">Figure 4:</span>      <span class="figure-title">Assortative mating is detected in the inferred genealogical networks for Finland (1735&#x2013;1885), but the phenomenon is not monotonously decreasing or increasing. Shaded areas correspond to the 95% bootstrap confidence intervals.</span>     </div>    </figure>    </p>   </section>   <section id="sec-14">    <header>    <div class="title-info">     <h2>      <span class="section-number">5</span> Case Study: Assortative Mating</h2>    </div>    </header>    <p>    <em>Assortative mating</em>, also known as <em>social homogamy</em>, refers to the phenomenon that people tend to marry spouses with a similar socioeconomic status and it is one instance of <em>social stratification</em>. A recent study shows that assortative mating contributes to income inequality and it has been on the rise between 1960 and 2005&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0014">14</a>]. In this section, we leverage the inferred genealogical network to address two questions:</p>    <ul class="list-no-style">    <li id="uid36" label="(i)">Can we detect assortative mating in historical Finland?<br/></li>    <li id="uid37" label="(ii)">How has the intensity of assortative mating evolved in historical Finland?<br/></li>    </ul>    <section id="sec-15">    <header>     <div class="title-info">      <h3>       <span class="section-number">5.1</span> Estimating Social Status</h3>     </div>    </header>    <p>To detect assortative mating, we compare the socioeconomic status of the spouses inferred by our linking method. We use <em>occupation</em> as a proxy for status, and rather than comparing the occupations of the spouses directly, we compare the occupations of the spouses&#x2019; fathers. The father occupations are more comparable since occupations were strongly gendered in the 18th and 19th centuries, which are the focus of this study. Furthermore, there is a separate field for father occupation in the birth records so we do not need to separately infer the fathers but only the spouses.</p>    <p>The numerous variants and alternative abbreviations of the same occupation pose a challenge when comparing occupations. For instance, <em>farmer</em>, which is the most common occupation in the dataset, goes by the following (non-comprehensive) list of titles: <em>bonden, bd., b., bd:, b:, b:n, bdn, b:den, talollinen, talonpoika, tal., talp., tl., tln., talonp</em>. To address this challenge, we normalize the occupation titles by first removing special characters and then comparing the title to lists of abbreviations available online&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0001">1</a>, <a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0015">15</a>]. We have also manually normalized the most common abbreviations not found in the online lists to increase the coverage of the normalization. In total, we are able to normalize 77.5% of all non-empty father occupation titles found in the birth records.</p>    <p>In addition to comparing the normalized occupations directly, we also map them to the historical international classification of occupations (HISCO) [<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0029">29</a>]. Then we divide the HISCO classes into four main classes: (1)&#x00A0;upper and middle class, (2)&#x00A0;peasants (who own land), (3)&#x00A0;crofters (who rent land), and (4)&#x00A0;labourers (who live at another person&#x0027;s house). The class to which the father of a person belongs to is called <font style="font-variant: small-caps">Class4</font>. We also map the HISCO classes into an occupational stratification scale <font style="font-variant: small-caps">HISCAM</font> &#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"      href="#BibPLXBIB0020">20</a>].<a class="fn" href="#fn4" id="foot-fn4"><sup>4</sup></a>     <font style="font-variant: small-caps">HISCAM</font> is a real-valued number between 0 and 100 which measures the social interaction distance of people based on their occupations. The <font style="font-variant: small-caps">Class4</font> and <font style="font-variant: small-caps">HISCAM</font> codes are obtained for 75.5% of the people.</p>    </section>    <section id="sec-16">    <header>     <div class="title-info">      <h3>       <span class="section-number">5.2</span> Measuring Assortative Mating</h3>     </div>    </header>    <p>A high percentage of matching spouse father occupations (<em>p</em>) is a signal of assortative mating but this percentage might also be affected by external factors such as the number of distinct occupations people had at a given time in a given city or the availability of data from different cities at different time periods. To control for these external factors, we introduce a null model, which shuffles the spouses within a city and a time window of 20 years and then computes the percentage of matching occupations (<em>p<sub>n</sub>     </em>). Then we measure assortative mating as the ratio of the two percentages (<em>p</em>/<em>p<sub>n</sub>     </em>). This ratio measures how much more likely people marry someone with a similar social status compared to a null model where the marriages are randomized. Thus a ratio larger than one is a sign of assortative mating.</p>    <p>The higher-level occupation categories <font style="font-variant: small-caps">Class4</font> can also be used to compute match percentages (<em>q</em> and <em>q<sub>n</sub>     </em>) and their ratio <em>q</em>/<em>q<sub>n</sub>     </em>. With the <font style="font-variant: small-caps">HISCAM</font> scores, we compute the mean absolute difference of the scores for the spouses (<em>&#x03B4;</em>) and for the null model (<em>&#x03B4;<sub>n</sub>     </em>), instead of the percentages. The assortative mating measure, in this case, is defined as <em>&#x03B4;<sub>n</sub>     </em>/<em>&#x03B4;</em>, so that again, a ratio larger than one indicates assortative mating.</p>    </section>    <section id="sec-17">    <header>     <div class="title-info">      <h3>       <span class="section-number">5.3</span> Data</h3>     </div>    </header>    <p>As the set of spouses to be analyzed, we use all pairs of people who have been inferred to be the mother and the father of the same child. Both parent links are required to have at least a 90% probability (this threshold is varied in Appendix&#x00A0;<a class="sec" href="#sec-22">A</a>). We limit the analysis to the period with the most records from 1735 to 1885. Requiring both parents to have a sufficiently high link probability limits the number of spouses to 14&#x00A0;542 pairs. Out of these, the father occupation is known for both spouses in 6&#x00A0;402 pairs and <font style="font-variant: small-caps">Class4</font> and <font style="font-variant: small-caps">HISCAM</font> in 3&#x00A0;128 pairs. Although these filtering steps significantly reduce the number of spouses, we are still left with a sufficiently large dataset to perform a longitudinal analysis on assortative mating.</p>    </section>    <section id="sec-18">    <header>     <div class="title-info">      <h3>       <span class="section-number">5.4</span> Results</h3>     </div>    </header>    <p>The percentages of matching spouse father occupations over time and the corresponding assortative mating curve are shown on the top row of Figure&#x00A0;<a class="fig" href="#fig4">4</a>. In order to highlight long-term trends, the curves show moving averages where a data point at year <em>y</em> uses the inferred spouses from years [<em>y</em> &#x2212; 10, <em>y</em> + 10] (the effect of varying the delta value of 10 years is studied in Appendix&#x00A0;<a class="sec" href="#sec-22">A</a>). The figure also shows the 95% bootstrap confidence intervals.</p>    <p>The middle and the bottom rows show the corresponding curves for the occupations grouped into four main classes (<font style="font-variant: small-caps">Class4</font>) and for the numerical <font style="font-variant: small-caps">HISCAM</font> scores of the occupations, respectively.</p>    <p>All three measures of assortative mating suggest that assortative mating did occur in Finland between years 1735 and 1885 since the assortative mating curves are fairly consistently above the baseline ratio of 1. The intensity of the phenomenon varies mainly between 1 and 1.5 but interestingly, there is no monotonically decreasing or increasing trend.</p>    <p>Finally, we observe that the spouse similarity curves <em>p</em>, <em>q</em> and <em>&#x03B4;</em> have very different shapes, whereas the three assortative mating curves are clearly correlated (the correlation coefficients are 0.69, 0.23, and 0.62 for pairs (<em>p</em>/<em>p<sub>n</sub>     </em> vs. <em>q</em>/<em>q<sub>n</sub>     </em>), (<em>p</em>/<em>p<sub>n</sub>     </em> vs. <em>&#x03B4;<sub>n</sub>     </em>/<em>&#x03B4;</em>), and (<em>q</em>/<em>q<sub>n</sub>     </em> vs. <em>&#x03B4;<sub>n</sub>     </em>/<em>&#x03B4;</em>), respectively). This suggests that the proposed measures of assortative mating, which account for a null model, measure the phenomenon robustly.</p>    </section>   </section>   <section id="sec-19">    <header>    <div class="title-info">     <h2>      <span class="section-number">6</span> Related Work</h2>    </div>    </header>    <p>Genealogical network inference, also known as <em>population reconstruction</em>&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0003">3</a>], is one application of <em>record linkage</em>, which has been an active research area for many decades and was mentioned already in 1946 by Halbert L. Dunn&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0010">10</a>]&#x2014;interestingly, in the context of linking birth, marriage, and other vital records. Two decades later, Fellegi and Sunter published a widely cited paper on probabilistic record linkage&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0012">12</a>]. This approach considers a vector of attribute similarities between two records to be matched and then computes the optimal decision rule (<em>link</em> vs. <em>possible link</em> vs. <em>non-link</em>), assuming independent attributes. The <font style="font-variant: small-caps">BinClass</font> method, proposed in this work, adopts a similar approach, however, employing a supervised classifier, which has the advantage of capturing dependencies between variables.</p>    <p>Record linkage has been mostly studied for other applications, but recently, with the rise in the number of indexed genealogical datasets, several studies have applied record linkage techniques for genealogical data&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0007">7</a>, <a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0008">8</a>, <a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0011">11</a>, <a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0018">18</a>, <a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0019">19</a>, <a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0023">23</a>, <a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0025">25</a>, <a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0027">27</a>]. The most closely related to our work are the papers by Efremova et&#x00A0;al.&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0011">11</a>], Christen&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0007">7</a>], and Kouki et&#x00A0;al.&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0019">19</a>].</p>    <p>Efremova et&#x00A0;al.&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0011">11</a>] consider the problem of linking records from multiple genealogical datasets. They cast the linking problem into supervised binary classification tasks, similar to this work, and find name popularity, geographical distance, and co-reference information to be important features. In our approach, we can avoid having to explicitly model name popularity, since the probability of a candidate parent is normalized over the set of all candidate parents, and for popular names this set will be large, thus downweighting the probability of the candidate.</p>    <p>Christen&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0007">7</a>] and Kouki et&#x00A0;al.&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0019">19</a>] propose collective methods for linking vital records. The former method is evaluated on historical Scottish data and it is concluded that due many intrinsically difficult linking cases, the results are inferior to a linkage constructed by a domain expert. The latter method is evaluated on a more recent dataset collected by the National Institutes of Health and it yields a high linking F-measure of 0.946. This method is based on probabilistic soft logic (PSL), which makes it possible to add new relational rules to the model without having to update the inference method. In comparison to these works, we evaluate our methods on a dataset that is two orders of magnitude larger, and we show that the proposed <font style="font-variant: small-caps">BinClass</font> method not only provides accurate matches but also reliably quantifies the certainty of the matches&#x2014;an important feature of a practical entity-resolution system.</p>    <p>Assortative mating,<a class="fn" href="#fn5" id="foot-fn5"><sup>5</sup></a> also known as <em>social homogamy</em>, has been studied widely in the sociology literature. The phenomenon has a significant societal impact since it has been shown to be connected to income inequality&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0014">14</a>]. Greenwood et.&#x00A0;al.&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0014">14</a>] also find that assortative mating has been on the rise 1960&#x2013;2005. Bull&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0005">5</a>] studies assortative mating in Norway, 1750&#x2013;1900, focusing on farmers and farm workers. They find that assortative mating was declining in the mid-1700s but after that it stayed fairly constant. This finding is largely in line with our results for Finland from the same time period. To control for the variations in the sizes of the groups, Bull computes odds ratios&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0005">5</a>, <a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0017">17</a>], whereas we use a null model, which randomizes spouses.</p>   </section>   <section id="sec-20">    <header>    <div class="title-info">     <h2>      <span class="section-number">7</span> Discussion and Conclusions</h2>    </div>    </header>    <p>We presented a principled probabilistic machine-learning approach, <font style="font-variant: small-caps">BinClass</font>, for inferring genealogical networks. This approach was applied to a dataset of 5.0&#x00A0;million birth records and 3.3 million death records based on which it inferred a network, containing 13 generations and a connected component of 2.6&#x00A0;million individuals, taking about one hour when parallelized over 50 machines. A comparison against a large human-compiled network yielded a link accuracy of 61.6%, outperforming a naive Bayes baseline method. We showed that the accuracy can be further improved to 65.1% by a collective approach called <font style="font-variant: small-caps">Collective</font>.</p>    <p>A key feature of <font style="font-variant: small-caps">BinClass</font> is that it outputs probabilities for the inferred links. This allowed us to separate links that have a sufficiently high probability and to perform an analysis on the mating patterns observed in the network. The main findings of the analysis are that: (<em>i</em>)&#x00A0;assortative mating&#x2014;the tendency to select a spouse with a similar socioeconomic status&#x2014;did occur in Finland, 1735&#x2013;1885, and (<em>ii</em>)&#x00A0;assortative mating did not monotonically decrease nor increase during this time period.</p>    <p>    <strong>Limitations and future work.</strong> There is always uncertainty involved when analyzing records that are several centuries old and even an experienced domain expert can make incorrect linking decisions. Since our method relies on human-generated training data, any mistakes or biases in the training dataset affect the resulting model and potentially the downstream analyses. Although the automatic approach enables data generation for various analyses at an unprecedented scale, one has to be careful when drawing conclusions. For instance, an interesting phenomenon that could be studied with the inferred networks would be long-term human mobility patterns. However, since the model uses features that are based on location, any potential biases learned by the model would directly affect the analysis of the resulting mobility patterns.</p>    <p>Many exciting future directions are left unexplored. First, it would be useful to extend the problem formulation so that it tries to jointly link all available record types, as now we only link birth records, using some features based on death records linked to the births separately. Second, it would be interesting to incorporate additional collective terms to the optimization problem, capturing patterns such as namesaking (a practice to name a child after an ancestor) or constraints on the family relations between individuals, which could be obtained from DNA tests. Third, there are many options for extending the assortative mating analysis presented in this work. We could study the differences in the strength of this phenomenon between social classes and between, for example, the first and the latter children. We could also extend the analysis to a related phenomenon of <em>social mobility</em>, which considers the status differences between parents and children instead of spouses. Fourth, with the advent of improved handwritten text recognition methods, similar historical birth record datasets can be expected to become available for many other countries. This will enable studying the generalizability of the proposed methods and the assortative mating analysis beyond Finland. Finally, the presented inference and analysis methods could be applied to other types of genealogical networks such as the genealogical networks of Web content [<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"     href="#BibPLXBIB0002">2</a>].</p>    <p>To facilitate future research on these and other related research problems, the data and the code used in this paper have been made available at: <a class="link-inline force-break" href="https://github.com/ekQ/genealogy">https://github.com/ekQ/genealogy</a>. </p>   </section>  </section>  <section class="back-matter">   <section id="sec-21">    <header>    <div class="title-info">     <h2>ACKNOWLEDGMENTS</h2>    </div>    </header>    <p>We would like to thank the Genealogical Society of Finland for providing the population-record data, Pekka Valta for the ground-truth data, and Antti H&#x00E4;kkinen for the HISCO and <font style="font-variant: small-caps">Class4</font> mappings. We are also grateful for useful discussions with Przemyslaw Grabowicz, Sami Liedes, Jari Saram&#x00E4;ki, Ingmar Weber, and Emilio Zagheni. We also acknowledge the computational resources provided by the Aalto Science-IT project. Eric Malmi and Aristides Gionis were supported by the EC H2020 RIA project &#x201C;SoBigData&#x201D; (654024).</p>   </section>   <Appendix>    <section id="sec-22">    <header>     <div class="title-info">      <h2>       <span class="section-number">A</span> Assortative Mating Sensitivity Analysis</h2>     </div>    </header>    <p>In this section, we study the effect of varying the minimum link probability threshold (<em>p<sub>th</sub>     </em>) of 90% and the moving average delta (<em>&#x0394;t</em>) of 10 years used in the analysis of assortative mating in Section&#x00A0;<a class="sec" href="#sec-14">5</a>. In the interest of space, we consider only the first assortative mating measure <em>p</em>/<em>pN</em>, which is based on the normalized occupations. The results are shown in Figure&#x00A0;<a class="fig" href="#fig5">5</a>.</p>    <p>First, we note that the larger the threshold <em>p<sub>th</sub>     </em> or the smaller the smoothing parameter <em>&#x0394;t</em>, the less data points we have per year and thus larger the confidence intervals. Second, varying the threshold does not seem to affect the <em>p</em>/<em>pN</em> curves significantly. Third, decreasing the smoothing parameter to <em>&#x0394;t</em> = 3 makes the curves considerably less smooth, which suggests that a higher smoothing parameter might highlight the long-term trends more effectively.</p>    <p>We conclude that these results support the findings that assortative mating did occur in Finland, 1735&#x2013;1885, but it did not monotonically decrease nor increase during this time period. <figure id="fig5">      <img src="../../../data/deliveryimages.acm.org/10.1145/3190000/3186136/images/www2018-145-fig5.jpg" class="img-responsive" alt="Figure 5"       longdesc=""/>      <div class="figure-caption">       <span class="figure-number">Figure 5:</span>       <span class="figure-title">A sensitivity analysis showing the effect of varying the minimum link probability threshold (<em>p<sub>th</sub>       </em>) and the moving average delta (<em>&#x0394;t</em>) on the assortative mating curves from Figure&#x00A0;<a class="fig" href="#fig4">4</a> (top row).</span>      </div>     </figure>    </p>    </section>   </Appendix>   <section id="ref-001">    <header>    <div class="title-info">     <h2 class="page-brake-head">REFERENCES</h2>    </div>    </header>    <ul class="bibUl">    <li id="BibPLXBIB0001" label="[1]">2016. Lyhenteit&#x00E4; (Abbreviations). <a class="link-inline force-break" href="http://www.saunalahti.fi/hirvela/historismi_sivut/termitnew.html">http://www.saunalahti.fi/hirvela/historismi_sivut/termitnew.html</a>. (2016). Accessed: 2017-10-25.</li>    <li id="BibPLXBIB0002" label="[2]">Ricardo Baeza-Yates, &#x00C1;lvaro Pereira, and Nivio Ziviani. 2008. Genealogical trees on the Web: a search engine user perspective. In <em>      <em>Proc. WWW</em>     </em>.</li>    <li id="BibPLXBIB0003" label="[3]">Gerrit Bloothooft, Peter Christen, Kees Mandemakers, and Marijn Schraagen. 2015. <em>      <em>Population Reconstruction</em>     </em>. Springer.</li>    <li id="BibPLXBIB0004" label="[4]">Glenn&#x00A0;W Brier. 1950. Verification of forecasts expressed in terms of probability. <em>      <em>Monthey Weather Review</em>     </em>78, 1 (1950), 1&#x2013;3.</li>    <li id="BibPLXBIB0005" label="[5]">Hans&#x00A0;Henrik Bull. 2005. Deciding whom to marry in a rural two-class society: Social homogamy and constraints in the marriage market in Rendalen, Norway, 1750&#x2013;1900. <em>      <em>International review of social History</em>     </em>50, S13 (2005), 43&#x2013;63.</li>    <li id="BibPLXBIB0006" label="[6]">Tianqi Chen and Carlos Guestrin. 2016. XGBoost: A scalable tree boosting system. In <em>      <em>Proc. KDD</em>     </em>.</li>    <li id="BibPLXBIB0007" label="[7]">P. Christen. 2016. Application of advanced record linkage techniques for complex population reconstruction. <em>      <em>ArXiv e-prints</em>     </em> (Dec. 2016). <a class="link-inline force-break" href="arxiv:cs.DB/1612.04286">arxiv:cs.DB/1612.04286</a></li>    <li id="BibPLXBIB0008" label="[8]">Peter Christen, Dinusha Vatsalan, and Zhichun Fu. 2015. Advanced record linkage methods and privacy aspects for population reconstruction&#x2014;A survey and case studies. In <em>      <em>Population Reconstruction</em>     </em>. Springer, 87&#x2013;110.</li>    <li id="BibPLXBIB0009" label="[9]">Kyle Cranmer, Juan Pavez, and Gilles Louppe. 2016. Approximating likelihood ratios with calibrated discriminative classifiers. <em>      <em>ArXiv e-prints</em>     </em> (March 2016). <a class="link-inline force-break" href="arxiv:stat.AP/1506.02169">arxiv:stat.AP/1506.02169</a></li>    <li id="BibPLXBIB0010" label="[10]">Halbert&#x00A0;L Dunn. 1946. Record linkage. <em>      <em>American Journal of Public Health and the Nations Health</em>     </em>36, 12(1946), 1412&#x2013;1416.</li>    <li id="BibPLXBIB0011" label="[11]">Julia Efremova, Bijan Ranjbar-Sahraei, Hossein Rahmani, Frans&#x00A0;A Oliehoek, Toon Calders, Karl Tuyls, and Gerhard Weiss. 2015. Multi-source entity resolution for genealogical data. In <em>      <em>Population Reconstruction</em>     </em>. Springer, 129&#x2013;154.</li>    <li id="BibPLXBIB0012" label="[12]">Ivan&#x00A0;P Fellegi and Alan&#x00A0;B Sunter. 1969. A theory for record linkage. <em>      <em>AmerStatAssoc</em>     </em>64, 328 (1969), 1183&#x2013;1210.</li>    <li id="BibPLXBIB0013" label="[13]">Angelos&#x00A0;P Giotis, Giorgos Sfikas, Basilis Gatos, and Christophoros Nikou. 2017. A survey of document image word spotting techniques. <em>      <em>Pattern Recognition</em>     </em>68(2017), 310&#x2013;332.</li>    <li id="BibPLXBIB0014" label="[14]">Jeremy Greenwood, Nezih Guner, Georgi Kocharkov, and Cezar Santos. 2014. Marry your like: Assortative mating and income inequality. <em>      <em>The American Economic Review</em>     </em>104, 5 (2014), 348&#x2013;353.</li>    <li id="BibPLXBIB0015" label="[15]">Aija Greus and Harri Hirvel&#x00E4;. 2016. Ammatit (Occupations). <a class="link-inline force-break" href="http://www.saunalahti.fi/hirvela/historismi_sivut/ammatit%20a-k.html">http://www.saunalahti.fi/hirvela/historismi_sivut/ammatit%20a-k.html</a>. (2016). Accessed: 2017-10-25.</li>    <li id="BibPLXBIB0016" label="[16]">Kamal Jain and Vijay&#x00A0;V Vazirani. 2001. Approximation algorithms for metric facility location and k-median problems using the primal-dual schema and Lagrangian relaxation. <em>      <em>Journal of the ACM (JACM)</em>     </em>48, 2 (2001), 274&#x2013;296.</li>    <li id="BibPLXBIB0017" label="[17]">Matthijs Kalmijn. 1998. Intermarriage and homogamy: Causes, patterns, trends. <em>      <em>Annual review of sociology</em>     </em>24, 1 (1998), 395&#x2013;421.</li>    <li id="BibPLXBIB0018" label="[18]">Pigi Kouki, Christopher Marcum, Laura Koehly, and Lise Getoor. 2016. Entity resolution in familial networks. In <em>      <em>Proc. MLG</em>     </em>.</li>    <li id="BibPLXBIB0019" label="[19]">Pigi Kouki, Jay Pujara, Christopher Marcum, Laura Koehly, and Lise Getoor. 2017. Collective Entity Resolution in Familial Networks. In <em>      <em>Proc. ICDM</em>     </em>.</li>    <li id="BibPLXBIB0020" label="[20]">Paul&#x00A0;S Lambert, Richard&#x00A0;L Zijdeman, Marco&#x00A0;HD Van&#x00A0;Leeuwen, Ineke Maas, and Kenneth Prandy. 2013. The construction of HISCAM: A stratification scale based on social interactions for historical comparative research. <em>      <em>Historical Methods: A Journal of Quantitative and Interdisciplinary History</em>     </em>46, 2(2013), 77&#x2013;89.</li>    <li id="BibPLXBIB0021" label="[21]">David Lazer, Alex&#x00A0;Sandy Pentland, Lada Adamic, Sinan Aral, Albert&#x00A0;Laszlo Barabasi, Devon Brewer, Nicholas Christakis, Noshir Contractor, James Fowler, Myron Gutmann, <em>et al.</em> 2009. Life in the network: the coming age of computational social science. <em>      <em>Science</em>     </em>323, 5915 (2009), 721&#x2013;723.</li>    <li id="BibPLXBIB0022" label="[22]">Jianxun Lian and Xing Xie. 2016. Cross-device user matching based on massive browse logs: The runner-up solution for the 2016 CIKM Cup.</li>    <li id="BibPLXBIB0023" label="[23]">Eric Malmi, Sanjay Chawla, and Aristides Gionis. 2017. Lagrangian relaxations for multiple network alignment. <em>      <em>Data Mining and Knowledge Discovery</em>     </em>(2017), 1&#x2013;28.</li>    <li id="BibPLXBIB0024" label="[24]">Eric Malmi, Marko Rasa, and Aristides Gionis. 2017. AncestryAI: A tool for exploring computationally inferred family trees. In <em>      <em>Proc. WWW Companion</em>     </em>.</li>    <li id="BibPLXBIB0025" label="[25]">Eric Malmi, Evimaria Terzi, and Aristides Gionis. 2017. Active Network Alignment: A Matching-Based Approach. In <em>      <em>Proc. CIKM</em>     </em>.</li>    <li id="BibPLXBIB0026" label="[26]">Alexandru Niculescu-Mizil and Rich Caruana. 2005. Predicting good probabilities with supervised learning. In <em>      <em>Proc. ICML</em>     </em>.</li>    <li id="BibPLXBIB0027" label="[27]">Bijan Ranjbar-Sahraei, Julia Efremova, Hossein Rahmani, Toon Calders, Karl Tuyls, and Gerhard Weiss. 2015. HiDER: Query-driven entity resolution for historical data. In <em>      <em>Proc. ECML PKDD</em>     </em>.</li>    <li id="BibPLXBIB0028" label="[28]">Yi Tay, Cong-Minh Phan, and Tuan-Anh&#x00A0;Nguyen Pham. 2016. Cross device matching for online advertising with neural feature ensembles: First place solution at CIKM Cup 2016.</li>    <li id="BibPLXBIB0029" label="[29]">Marco&#x00A0;HD Van&#x00A0;Leeuwen, Ineke Maas, and Andrew Miles. 2002. <em>      <em>HISCO: Historical international standard classification of occupations</em>     </em>. Leuven University Press.</li>    <li id="BibPLXBIB0030" label="[30]">Ingmar Weber and Bogdan State. 2017. Digital Demography. In <em>      <em>Proc. WWW Companion</em>     </em>.</li>    </ul>   </section>  </section>  <section id="foot-001" class="footnote">   <header>    <div class="title-info">    <h2>FOOTNOTE</h2>    </div>   </header>   <p id="fn1"><a href="#foot-fn1"><sup>1</sup></a><a class="link-inline force-break" href="https://read.transkribus.eu/">https://read.transkribus.eu/</a>   </p>   <p id="fn2"><a href="#foot-fn2"><sup>2</sup></a>The names are normalized with a tool developed by the authors of&#x00A0;[<a class="bib" data-trigger="hover" data-toggle="popover" data-placement="top"    href="#BibPLXBIB0024">24</a>], which is available at: <a class="link-inline force-break"    href="https://github.com/ekQ/historical_name_normalizer">https://github.com/ekQ/historical_name_normalizer</a>   </p>   <p id="fn3"><a href="#foot-fn3"><sup>3</sup></a>Based on the ground-truth data (Section&#x00A0;<a class="sec" href="#sec-7">2.2</a>), 96.4% of the obtained death record matches are correct, but we are able to match only 18% of the 3.3 million death records. Ideally, the death record matching should be done in a probabilistic way, jointly with the birth record linking.</p>   <p id="fn4"><a href="#foot-fn4"><sup>4</sup></a>More specifically, we use the &#x201C;U2: Male only, 1800&#x2013;1938&#x201D; scale. For more information on the different scales, see: <a class="link-inline force-break" href="http://www.camsis.stir.ac.uk/hiscam/">http://www.camsis.stir.ac.uk/hiscam/</a>   </p>   <p id="fn5"><a href="#foot-fn5"><sup>5</sup></a>Assortative mating can also refer to <em>genetic</em> assortative mating, but here we use it exclusively to refer to sociological assortative mating.</p>   <div class="bibStrip">    <p>This paper is published under the Creative Commons Attribution 4.0 International (CC-BY&#x00A0;4.0) license. Authors reserve their rights to disseminate the work on their personal and corporate Web sites with the appropriate attribution.</p>    <p>    <em>WWW '18, April 23-27, 2018, Lyon, France</em>    </p>    <p>&#x00A9; 2018; IW3C2 (International World Wide Web Conference Committee), published under Creative Commons CC-BY&#x00A0;4.0 License. ACM ISBN 978-1-4503-5639-8/18/04.<br/>DOI: <a class="link-inline force-break" target="_blank"     href="https://doi.org/10.1145/3178876.3186136">https://doi.org/10.1145/3178876.3186136</a>    </p>   </div>  </section>  <div class="pubHistory">   <p/>  </div> </body> </html> 
