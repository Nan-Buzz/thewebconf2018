<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for HTML5 for Linux version 5.7.16" />
  <title>A Combinational Optimization Approach for Advertising
  Budget Allocation</title>
  <!-- Copyright (c) 2010-2015 The MathJax Consortium -->
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8" />
  <meta name="viewport" content=
  "width=device-width; initial-scale=1.0;" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="screen, print" rel="stylesheet" href=
  "../../../data/dl.acm.org/pubs/lib/css/bootstrap.min.css" />
  <link media="screen, print" rel="stylesheet" href=
  "../../../data/dl.acm.org/pubs/lib/css/bootstrap-theme.min.css" />
  <link media="screen, print" rel="stylesheet" href=
  "../../../data/dl.acm.org/pubs/lib/css/main.css" />
  <script src="../../../data/dl.acm.org/pubs/lib/js/jquery.min.js" type=
  "text/javascript"></script>
  <script src="../../../data/dl.acm.org/pubs/lib/js/bootstrap.min.js"
  type="text/javascript"></script>
  <script src="../../../data/dl.acm.org/pubs/lib/js/bibCit.js" type=
  "text/javascript"></script>
  <script src="../../../data/dl.acm.org/pubs/lib/js/divTab.js" type=
  "text/javascript"></script>
  <script type="text/javascript" src=
  "../../../data/dl.acm.org/pubs/lib/js/MathJax.js?config=TeX-AMS_CHTML"></script>
  <script type="text/x-mathjax-config">
  <![CDATA[
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  ]]>
  </script>
</head>
<body id="main">
  <section class="front-matter">
    <section>
      <header class="title-info">
        <div class="journal-title">
          <h1><span class="title">A Combinational Optimization
          Approach for Advertising Budget Allocation</span><br />
          <span class="subTitle"></span></h1>
        </div>
      </header>
      <div class="authorGroup">
        <div class="author">
          <span class="givenName">Deguang</span> <span class=
          "surName">Kong</span> Yahoo Research, Oath, 701 1st Ave,
          Sunnyvale, California, 94086
        </div>
        <div class="author">
          <span class="givenName">Xiannian</span> <span class=
          "surName">Fan</span> Yahoo Research, Oath, 701 1st Ave,
          Sunnyvale, California, 94086
        </div>
        <div class="author">
          <span class="givenName">Konstantin</span> <span class=
          "surName">Shmakov</span> Yahoo Research, Oath, 701 1st
          Ave, Sunnyvale, California, 94086
        </div>
        <div class="author">
          <span class="givenName">Jian</span> <span class=
          "surName">Yang</span> Yahoo Research, Oath, 701 1st Ave,
          Sunnyvale, California, 94086, <a href=
          "mailto:dkong,%20xiannian.fan,%20kshmakov,%20jianyang@oath.com">
          dkong, xiannian.fan, kshmakov, jianyang@oath.com</a>
        </div>
      </div><br />
      <div class="pubInfo">
        <p>DOI: <a href="https://doi.org/10.1145/3184558.3186925"
        target=
        "_blank">https://doi.org/10.1145/3184558.3186925</a><br />
        WWW '18: <a href="https://doi.org/10.1145/3184558" target=
        "_blank">Proceedings of The Web Conference 2018</a>, Lyon,
        France, April 2018</p>
      </div>
      <div class="abstract">
        <p><small>Bid optimization, which aims to find the
        competitive bid to achieve the best performance for the
        advertiser, is an important problem in online advertising.
        The optimal bid recommendation enables the advertisers to
        make informed decisions without actually spending the
        budget. In this paper, we consider a bid optimization
        scenario that the advertiser's budget can be split across
        multiple campaigns. To achieve the optimal performance, we
        formalize the bid optimization problem as a constraint
        combinational optimization problem, and derive an effective
        method to solve it. Experiment studies on real-world ad
        campaigns demonstrate the effectiveness of our
        method.</small></p>
      </div>
      <div class="CCSconcepts">
        <p><small><span style="font-weight:bold;">CCS
        Concepts:</span> • <strong>Information systems</strong> →
        <strong>Computational advertising;</strong></small></p>
      </div>
      <div class="classifications">
        <div class="author">
          <span style=
          "font-weight:bold;"><small>Keywords:</small></span>
          <span class="keyword"><small>Advertising; Optimization;
          Bidding</small></span>
        </div><br />
        <div class="AcmReferenceFormat">
          <p><small><span style="font-weight:bold;">ACM Reference
          Format:</span><br />
          Deguang Kong, Xiannian Fan, Konstantin Shmakov, and Jian
          Yang. 2018. A Combinational Optimization Approach for
          Advertising Budget Allocation. In <em>WWW '18 Companion:
          The 2018 Web Conference Companion,</em> <em>April 23–27,
          2018,</em> <em>Lyon, France. ACM, New York, NY, USA</em>
          2 Pages. <a href=
          "https://doi.org/10.1145/3184558.3186925" class=
          "link-inline force-break" target=
          "_blank">https://doi.org/10.1145/3184558.3186925</a></small></p>
        </div>
      </div>
    </section>
  </section>
  <section class="body">
    <section id="sec-2">
      <header>
        <div class="title-info">
          <h2><span class="section-number">1</span>
          Introduction</h2>
        </div>
      </header>
      <p>Computational advertising (a.k.a online advertising) aims
      to serve the most relevant ads (from advertisers) matching to
      the particular context in web publisher. Computational
      advertising market has grown a lot and its market size will
      reach to over <font style="normal">$</font>250
      billion<a class="fn" href="#fn1" id=
      "foot-fn1"><sup>1</sup></a> in 2018. The publishers sell the
      ad inventories to the advertisers with the highest bidding
      via online auction mechanism in the non-guaranteed delivery
      of ads in sales channel. The ads market place acts as the
      platform for advertisers to bid for achieving the desired
      performance goals (such as impressions, clicks, etc). In
      computational ads, estimating the campaign performance at
      different bid prices will help the advertiser to plan their
      campaigns. In bid optimization, one important problem, which,
      however, has been ignored is that most advertisers have
      rigorous budget limits and they would like to split their
      budget across different campaigns in order to achieve the
      maximum return on investment (ROI). The question that
      naturally follows is: how to optimize the bid to maximize the
      KPIs (such as clicks, CTR&nbsp;[<a class="bib" data-trigger=
      "hover" data-toggle="popover" data-placement="top" href=
      "#BibPLXBIB0003">3</a>]) given the budget limit shared by
      multiple campaigns?</p>
      <p>To the best of our knowledge, this problem has not been
      well studied. Although there are some works that leverage
      supervised learning&nbsp;[<a class="bib" data-trigger="hover"
      data-toggle="popover" data-placement="top" href=
      "#BibPLXBIB0007">7</a>], second price auction theory<a class=
      "fn" href="#fn2" id="foot-fn2"><sup>2</sup></a> and linear
      programming (LP) primal-dual method&nbsp;[<a class="bib"
      data-trigger="hover" data-toggle="popover" data-placement=
      "top" href="#BibPLXBIB0002">2</a>] for CPI optimization, and
      Markov Decision Process framework&nbsp;[<a class="bib"
      data-trigger="hover" data-toggle="popover" data-placement=
      "top" href="#BibPLXBIB0001">1</a>], inflection
      point&nbsp;[<a class="bib" data-trigger="hover" data-toggle=
      "popover" data-placement="top" href="#BibPLXBIB0004">4</a>]
      and CPA goal&nbsp;[<a class="bib" data-trigger="hover"
      data-toggle="popover" data-placement="top" href=
      "#BibPLXBIB0005">5</a>] for bid optimization, they are still
      quite limited in addressing the challenges: (C1) There are a
      broad margin of errors due to the real-word data shift from
      estimation; (C2) There are very sparse and noisy observations
      for some campaigns; (C3) How to fairly and accurately split
      the budget to achieve the best KPI is non-trivial given the
      diversified campaigns.</p>
      <p>To address these challenges, this paper presents the
      solutions that can automatically set bids for every
      advertiser to achieve the best performance goals across
      multiple campaigns given the fixed budget, which is actually
      similar to the process of choosing the proportions of budget
      be held in a portfolio, in such a way as to make the
      portfolio better than any others based on some criteria such
      as campaign KPI. However, the criteria for ad bid
      optimization is quite different from the expected value of
      the portfolio's rate of return as well as of the return's
      dispersion, possible risk and variance used in portfolio
      optimization&nbsp;[<a class="bib" data-trigger="hover"
      data-toggle="popover" data-placement="top" href=
      "#BibPLXBIB0006">6</a>]&nbsp;[<a class="bib" data-trigger=
      "hover" data-toggle="popover" data-placement="top" href=
      "#BibPLXBIB0008">8</a>] in finance, which makes the
      traditional portfolio algorithm unable to work well here.
      Therefore, in this paper, we develop an effective algorithm
      to solve the portfolio optimization such that overall the
      advertiser can meet budget goals while the campaign achieves
      the best performance.</p>
    </section>
    <section id="sec-3">
      <header>
        <div class="title-info">
          <h2><span class="section-number">2</span>
          Methodology</h2>
        </div>
      </header>
      <p>Our goal is to find the best bidding price for each
      campaign that can maximize the overall KPI (e.g., clicks) at
      advertiser-level while satisfying the budget requirement. In
      the context of this paper, we use “<em>maximum click</em>” as
      the criterion for KPI<a class="fn" href="#fn3" id=
      "foot-fn3"><sup>3</sup></a>.</p>
      <p>Suppose an advertiser initiated <em>k</em> campaign cases
      and the overall advertiser budget is <em>B</em>, let the
      bidding price for campaign case <em>i</em> be
      <em>b<sub>i</sub></em> (1 ≤ <em>i</em> ≤ <em>k</em>), then
      the optimization goal is:</p>
      <div class="table-responsive" id="eq1">
        <div class="display-equation">
          <span class="tex mytex">\begin{eqnarray} &amp;&amp; \max
          _{b_{1}, b_2, \cdots , b_{k}} \;\; \sum _i \hat{h_i}(b_i,
          \theta ^i) \nonumber \\ &amp;&amp; s.t. \;\; \sum _i
          \hat{g_i}(b_i, \Theta _i) \le B, \;\; b_i \ge 0,
          \end{eqnarray}</span><br />
          <span class="equation-number">(1)</span>
        </div>
      </div>where <span class="inline-equation"><span class=
      "tex">$\hat{h_i}$</span></span> , <span class=
      "inline-equation"><span class="tex">$\hat{g_i}$</span></span>
      denote estimated click and spend functions with parameter
      <em>θ<sub>i</sub></em> and <em>Θ<sub>i</sub></em>
      respectively. The obtained optimal solution <span class=
      "inline-equation"><span class="tex">$(b^*_1, b^*_2, \cdots ,
      b^*_k)$</span></span> is expected to maximize the overall
      clicks of the advertiser given the budget limit. To solve
      this problem, we propose an effective method that involves
      several steps:
      <p></p>
      <p>• <strong>Step 1:</strong> Estimating the click and spend
      functions (with parameters <em>θ<sub>i</sub></em> and
      <em>Θ<sub>i</sub></em> ) using non-linear regression;</p>
      <p>• <strong>Step 2:</strong> Solving the optimization using
      the constraint optimization method.</p>
      <p>Let <strong>b</strong> = [<em>b</em> <sub>1</sub>,
      <em>b</em> <sub>2</sub>, ⋅⋅⋅, <em>b<sub>k</sub></em> ],
      and</p>
      <div class="table-responsive" id="eq2">
        <div class="display-equation">
          <span class="tex mytex">\begin{eqnarray} H({\bf b}): =
          \sum _i h_i (b_i; \theta ^i), \quad \quad G({\bf b}) :=
          \sum _i g_i (b_i; \Theta ^i). \end{eqnarray}</span><br />
          <span class="equation-number">(2)</span>
        </div>
      </div>Notice that the Lagrangian function is:
      <div class="table-responsive" id="eq3">
        <div class="display-equation">
          <span class="tex mytex">\begin{eqnarray} &amp;&amp;
          L({\bf b}, \lambda , \mu) = H({\bf b}) + \lambda (G({\bf
          b}) - B) + \frac{\mu }{2} (G({\bf b}) - B)^2, \nonumber
          \\ &amp;&amp; s.t. \;\; {\bf b} \ge 0.
          \end{eqnarray}</span><br />
          <span class="equation-number">(3)</span>
        </div>
      </div>When optimizing <em>b<sub>i</sub></em> , the Lagrangian
      function concerning <em>b<sub>i</sub></em> becomes:
      <div class="table-responsive" id="eq4">
        <div class="display-equation">
          <span class="tex mytex">\begin{eqnarray} &amp;&amp;
          L(b_i, \lambda , \mu) = - h_i(b_i) + \lambda (g_i(b_i) +
          \sum _{j \ne i} g_j (b_j) - B) \nonumber \\ &amp;&amp; +
          \frac{\mu }{2} \Big (g_i(b_i) + \sum _{j \ne i} g_j (b_j)
          - B \Big)^2, \nonumber \\ &amp;&amp; s.t. \;\; b_i \ge 0.
          \end{eqnarray}</span><br />
          <span class="equation-number">(4)</span>
        </div>
      </div>Notice that
      <div class="table-responsive" id="eq5">
        <div class="display-equation">
          <span class="tex mytex">\begin{eqnarray} \frac{\partial
          {L(b_i, \lambda , \mu)}}{\partial {b_i}}= -\frac{\partial
          {h_i(b_i)}}{\partial {b_i}} + \lambda \frac{\partial
          {g_i(b_i)}}{\partial {b_i}} + \mu (g_i(b_i) - D)
          \frac{\partial {g_i(b_i)}}{\partial {b_i}},
          \end{eqnarray}</span><br />
          <span class="equation-number">(5)</span>
        </div>
      </div>where
      <div class="table-responsive">
        <div class="display-equation">
          <span class="tex mytex">\[ D= B - \sum _{j \ne i} g_j
          (b_j) . \]</span><br />
        </div>
      </div>According to Karush-Kuhn-Tucker (KKT) condition, we
      have
      <div class="table-responsive" id="eq6">
        <div class="display-equation">
          <span class="tex mytex">\begin{eqnarray} &amp;&amp;
          \lambda ^* \ge 0,\;\;\; \lambda ^* (G({\bf b}) - B) =0,
          \nonumber \\ &amp;&amp; (G({\bf b}) - B) \le 0, \;\; \bf
          b^*_i \ge 0, \;\;\; \mu ^* {\gt} 0, \nonumber \\
          &amp;&amp; \frac{\partial {L(b_i)}}{\partial {b^*_i}}
          b^*_i = 0 (\forall i). \end{eqnarray}</span><br />
          <span class="equation-number">(6)</span>
        </div>
      </div>This gives the algorithm to solve
      <em>b<sub>i</sub></em> using projection into non-negative
      space, i.e.,
      <div class="table-responsive" id="eq7">
        <div class="display-equation">
          <span class="tex mytex">\begin{eqnarray} b_i \leftarrow
          b_i - \eta \frac{\partial {L(b_i)}}{\partial {b_i}},
          \end{eqnarray}</span><br />
          <span class="equation-number">(7)</span>
        </div>
      </div>where <em>η</em> is the stepsize. The algorithm
      converges to the optimal solution.
      <p></p>
    </section>
    <section id="sec-4">
      <header>
        <div class="title-info">
          <h2><span class="section-number">3</span> Experiment</h2>
        </div>
      </header>
      <p>Given the accurate estimation of spend and clicks, as is
      observed in experimental study on multiple ads campaigns from
      the same advertiser, our method can always give the optimal
      solution. We also compare against two baseline methods:</p>
      <p>(i) Grid search: search all available bid price in
      observations for each campaign, and then perform a search
      over all possible bid combinations from different campaigns
      before locating the one with the highest clicks within the
      budget limit. However, the major issue is combinatorial
      explosion.</p>
      <p>(ii) Naive search: split the budget across different
      campaigns evenly. Given the diversified performances of
      different campaigns, this approach, however, generally cannot
      produce the optimal solution.</p>
      <p>Tables&nbsp;<a class="tbl" href="#tab1">1</a>,
      &nbsp;<a class="tbl" href="#tab2">2</a> show the optimization
      results using two advertiser examples, where each advertiser
      has three different campaigns but with different performances
      of each campaign. We observe that our method always gives the
      best optimal solution. The same conclusion holds for other
      advertisers<a class="fn" href="#fn4" id=
      "foot-fn4"><sup>4</sup></a>.</p>
      <div class="table-responsive" id="tab1">
        <div class="table-caption">
          <span class="table-number">Table 1:</span> <span class=
          "table-title">An advertiser (id: 928285) with three
          campaigns given budget limit 100. The optimal solution
          (optimal bid, optimal click, optimal spend) derived using
          ours, Grid search and naive method.</span>
        </div>
        <table class="table">
          <tbody>
            <tr>
              <td style="text-align:center;">Method</td>
              <td style="text-align:center;">optimal bid</td>
              <td style="text-align:center;">optimal click</td>
              <td>optimal spend</td>
            </tr>
            <tr>
              <td style="text-align:center;">Ours</td>
              <td style="text-align:center;">[0.3127, 0.4398,
              1e-9]</td>
              <td style="text-align:center;">638.5023</td>
              <td>99.9891</td>
            </tr>
            <tr>
              <td style="text-align:center;">Grid search</td>
              <td style="text-align:center;">[0.3150, 0.4400,
              0]</td>
              <td style="text-align:center;">625.1631</td>
              <td>96.5623</td>
            </tr>
            <tr>
              <td style="text-align:center;">Naive</td>
              <td style="text-align:center;">[0.1641, 0.6042,
              0.1597]</td>
              <td style="text-align:center;">552.2347</td>
              <td>100</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="table-responsive" id="tab2">
        <div class="table-caption">
          <span class="table-number">Table 2:</span> <span class=
          "table-title">An advertiser (id: 1502906) with three
          campaigns given budget limit 5000. The optimal solution
          (optimal bid, optimal click, optimal spend) derived using
          ours, Grid search and naive method.</span>
        </div>
        <table class="table">
          <tbody>
            <tr>
              <td style="text-align:center;">Method</td>
              <td style="text-align:center;">optimal bid</td>
              <td style="text-align:center;">optimal click</td>
              <td>optimal spend</td>
            </tr>
            <tr>
              <td style="text-align:center;">Ours</td>
              <td style="text-align:center;">[e-30, 0.1823,
              0.2847]</td>
              <td style="text-align:center;">247616.17</td>
              <td>5000</td>
            </tr>
            <tr>
              <td style="text-align:center;">Grid search</td>
              <td style="text-align:center;">[0, 0.1850,
              0.2850]</td>
              <td style="text-align:center;">237935.89</td>
              <td>4968.87</td>
            </tr>
            <tr>
              <td style="text-align:center;">Naive</td>
              <td style="text-align:center;">[0.023, 0.1347,
              0.2022]</td>
              <td style="text-align:center;">53776.80</td>
              <td>5000</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    <section id="sec-5">
      <header>
        <div class="title-info">
          <h2><span class="section-number">4</span> Conclusion</h2>
        </div>
      </header>
      <p>This paper presents a novel way for portfolio bid
      optimization. The approach is novel in providing the optimal
      bid solution based on maximizing the clicks by splitting the
      budget across different campaigns for an advertiser. We also
      derive an effective method for obtaining the optimal solution
      with demonstrated advantages.</p>
    </section>
  </section>
  <section class="back-matter">
    <section id="ref-001">
      <header>
        <div class="title-info">
          <h2 class="page-brake-head">REFERENCES</h2>
        </div>
      </header>
      <ul class="bibUl">
        <li id="BibPLXBIB0001" label="[1]">Han Cai, Kan Ren, Weinan
        Zhang, Kleanthis Malialis, Jun Wang, Yong Yu, and Defeng
        Guo. 2017. Real-Time Bidding by Reinforcement Learning in
        Display Advertising. <em><em>CoRR</em></em>
        abs/1701.02490(2017).</li>
        <li id="BibPLXBIB0002" label="[2]">Ye Chen, Pavel Berkhin,
        Bo Anderson, and Nikhil&nbsp;R. Devanur. 2011. Real-time
        Bidding Algorithms for Performance-based Display Ad
        Allocation. In <em><em>KDD’11</em></em> . ACM,
        1307–1315.</li>
        <li id="BibPLXBIB0003" label="[3]">Hongchang Gao, Deguang
        Kong, Miao Lu, Xiao Bai, and Jian Yang. 2018. Context-Aware
        Attention Convolutional Neural Network for Advertiser-Level
        CTR Forecasting. In <em><em>WWW’2018</em></em> . ACM, to
        appear.</li>
        <li id="BibPLXBIB0004" label="[4]">Deguang Kong, ,
        Konstantin Shmakov, and Jian Yang. 2018. An Inflection
        Point Approach for Advertising Budget Allocation. In
        <em><em>WWW’2018</em></em> . ACM, to appear.</li>
        <li id="BibPLXBIB0005" label="[5]">Deguang Kong, Konstantin
        Shmakov, and Jian Yang. 2018. Demystifying Advertising
        Campaign for CPA Goal Optimization. In
        <em><em>WWW’2018</em></em> . ACM, to appear.</li>
        <li id="BibPLXBIB0006" label="[6]">Harry Markowitz. 1952.
        Portfolio Selection. <em><em>The Journal of
        Finance</em></em> 7, 1 (1952), 77–91.</li>
        <li id="BibPLXBIB0007" label="[7]">Claudia Perlich, Brian
        Dalessandro, Rod Hook, Ori Stitelman, Troy Raeder, and
        Foster Provost. 2012. Bid Optimizing and Inventory Scoring
        in Targeted Online Advertising. In <em><em>KDD’12</em></em>
        . ACM, 804–812.</li>
        <li id="BibPLXBIB0008" label="[8]">Theodoros Tsagaris, Ajay
        Jasra, and Niall Adams. 2012. Robust and adaptive
        algorithms for online portfolio selection.
        <em><em>Quantitative Finance</em></em> 12, 11 (2012),
        1651–1662.</li>
      </ul>
    </section>
  </section>
  <section id="foot-001" class="footnote">
    <header>
      <div class="title-info">
        <h2>FOOTNOTE</h2>
      </div>
    </header>
    <p id="fn1"><a href="#foot-fn1"><sup>1</sup></a><a class=
    "link-inline force-break" href=
    "https://www.thecapitalgroup.com/us/insights/investment-insights/tlv-digital.html">https://www.thecapitalgroup.com/us/insights/investment-insights/tlv-digital.html</a></p>
    <p id="fn2"><a href="#foot-fn2"><sup>2</sup></a><a class=
    "link-inline force-break" href=
    "https://en.wikipedia.org/wiki/Auction_theory">https://en.wikipedia.org/wiki/Auction_theory</a></p>
    <p id="fn3"><a href="#foot-fn3"><sup>3</sup></a>The criterion
    of maximum cost-per-acquisition (CPA) or pay-per-acquisition
    (PPA) can be similarly done.</p>
    <p id="fn4"><a href="#foot-fn4"><sup>4</sup></a>Due to space
    limit, we can not present detailed advertiser result here.</p>
    <div class="bibStrip">
      <p>This paper is published under the Creative Commons
      Attribution 4.0 International (CC-BY&nbsp;4.0) license.
      Authors reserve their rights to disseminate the work on their
      personal and corporate Web sites with the appropriate
      attribution.</p>
      <p><em>WWW '18, April 23-27, 2018, Lyon, France</em></p>
      <p>© 2018; IW3C2 (International World Wide Web Conference
      Committee), published under Creative Commons CC-BY&nbsp;4.0
      License. ACM ISBN 978-1-4503-5640-4/18/04.<br />
      DOI: <a class="link-inline force-break" target="_blank" href=
      "https://doi.org/10.1145/3184558.3186925">https://doi.org/10.1145/3184558.3186925</a></p>
    </div>
  </section>
  <div class="pubHistory">
    <p></p>
  </div>
</body>
</html>
